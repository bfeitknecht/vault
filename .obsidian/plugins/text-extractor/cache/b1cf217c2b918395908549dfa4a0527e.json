{"path":"sem4/CN/UE/e/CN-u05-e.pdf","text":"Exercise 5: Forwarding & Network Layer Question 1: Longest prefix matching (exam style question) Without prefix aggregation, a possible forwarding table looks like the one below. Using longest prefix matching, we can combine a few entries without changing the forwarding behavior. In order to reduce the table size, you are allowed to change, delete and add entries as you like. Be careful to preserve the exact forwarding behavior for any address. Original forwarding table: Prefix Outgoing Interface 128.128.0.0/9 eth0 128.160.0.0/11 eth1 128.176.0.0/12 eth0 128.192.0.0/10 eth0 default eth2 Question 2: Forwarding The following is a forwarding table at router R. Suppose packets with the following destination IP addresses arrive at router R. Determine the next hop. Give only one answer for each destination, using longest prefix matching. Destination Network Next Hop 139.179.200.0/23 R1 139.179.128.0/18 R2 139.179.112.0/20 R3 139.179.216.0/21 R4 139.179.0.0/16 R5 (a) 139.179.60.10 (b) 139.179.226.40 (c) 139.179.124.55 (d) 139.179.220.180 Question 3: Analyzing a network topology The following figure shows a network with 3 routers (shown as hexagons with an R), connected by an Ethernet switch (shown as a circle with an S). The routing table for the left-hand router is also shown. The first column “prefix” specifies all the prefixes for which the router has a specified forwarding behavior. The “next hop” column specifies the destination IP address and output interface to forward the datagram to. Note how some prefix ranges have no specified next hop IP address. This is because the router has a link-layer connection to the receivers in this address range and can thus directly send the packet to the actual 1 destination address. Verify that the entries of the routing table make sense (any datagram with any used destination IP address is correctly forwarded by the left-hand router). Note that the prefix is chosen to cover the IP addresses of all connected interfaces (including the source interface). For example, both 1.2.3.46 and 1.2.3.45 are considered, which results in the prefix 1.2.3.44/30 (instead of 1.2.3.46/32). Network Topology Question 3.1 Write the routing table for the right-hand router, so that packets will be delivered appropriately. I.e. Every packet addressed to any IP-address shown in the figure must be forwarded correctly by the right-hand router. Use no more than 5 route table entries and use the longest possible prefixes for all entries. Prefix Next Hop Output Next Hop IP 2 Question 3.2 Are all entries in the left-hand router’s table necessary? If not, show how to reduce the number of entries, without changing the routing behavior. Try to use the fewest number of entries and the longest possible prefixes for all entries. (Hint) Do not confuse prefix length with subnet size. The subnet specified by a longer prefix contains less addresses(“is smaller”) Question 4: Network Address Translation (NAT) Unlike the traditional client-server model, in peer-to-peer (P2P) applications, peers communicate with each other directly. In this question, we explore how network address translation (NAT) complicates P2P communication. When two peers both have public IP addresses, P2P communication works without a hitch, as both peers are directly reachable. But in reality, most Internet users are behind a NAT device, and these devices can disrupt P2P communication. Despite NAT devices, we can enjoy P2P applications, such as BitTorrent, Skype, etc. We will explore here how peers behind NAT devices can still connect to each other for P2P applications. For the following questions, assume that all communication is taking place over UDP. Also, assume that the NAT devices behave identically for UDP and TCP, i.e, they perform the same address and port translation: Question 4.1 Revisiting the traditional client-server model, the Figure below illustrates a typical communication model that we see in the Internet, where a client is behind a NAT and a server has a public IP address. 1. How can the client access the server (get the destination address)? 2. How can the server respond back to the client (To which address does the server reply to)? 3. What information is stored by the NAT for a correct translation? 1. client IP address 2. server IP address 3. client port 4. server port Client/Server Model 3 Question 4.2 Now let’s shift our discussion to P2P communication. As shown in the Figure below, both Peer A and B are behind NAT devices. Assume that the NAT’s translation tables are empty. Assume that peers know each other’s external IP addresses a priori. • Can the peers communicate with each other? Explain and provide a brief justification. P2P Model Question 4.3 Most P2P systems (including Skype) have special servers called rendezvous servers to assist Peer A to talk with Peer B as shown in the Figure below. Let’s consider a Skype call between the two peers, where Peer A (whose Skype ID is “OS”) calls Peer B (whose Skype ID is “NET”). How can this call be made? Please explain the steps that are necessary for Peer A, Peer B and the rendezvous server to make this call work. Furthermore, please explain the information that may be necessary at the two NATs and the rendezvous server. Assume that the rendezvous server listens for UDP packets over port 10,000. Hint: You may want to define application layer messages between the peers and the rendezvous server. P2P Model with Rendezvous Server Question 5: IPv6 Question 5.1: Addresses Which one of these is a valid IPv6 address? 4 • If the address is invalid, give the rule that the address breaks. • If the address is valid, give either it’s shortened or lengthened version. 1. 20f:306g:0:a8ef:28b1::05de 2. 2001:0db8:85a3:0000:0000:8a2e:0370:7334 3. :: 4. fe80::1ff::890a Question 5.2: NAT with IPv6 1. Why is NAT no longer necessary with IPv6? 2. Give a reason why it might still be deployed. 5","libVersion":"0.5.0","langs":""}