{"path":"sem4/CN/VRL/extra/slides/19-Linear-Programming.pdf","text":"Computer Networks: Linear Programming Adrian Perrig Based on slides by Markus Legner and Ankit Singla Photo: ETH ZÃ¼rich / Gian Marco Castelberg Motivation: optimization is a recurring problem in computer science ïƒ  Linear Programming (LP) 2 â€¢ Many examples in all areas of computer science â€¢ Many examples in networking - Minimize path length - Maximize flow - â€¦ â€¢ Typical form: optimize some quantity subject to some constraints â€¢ Generic techniques developed for these kinds of problems â€¢ Specific subtype: linear optimization problems What is a linear program (LP)? 3 Variables: â€¢ e.g., flows on edges, distance from start, â€¦ Objective: â€¢ e.g., maximize total flow, minimize distances towards T, â€¦ Constraints: â€¢ e.g., flow on edge â‰¤ capacity of edge, â€¦ â€¢ Real values â€¢ Objective function Î˜ must be linear combination of variables â€¢ Each constraint must be a linear combination of variables â€¢ (Strict inequalities (<, >) are not allowed) Canonical form of an LP â€¢ Vector of variables: ğ‘¥ = ğ‘¥!, â€¦ , ğ‘¥\" #, ğ‘¥ â‰¥ 0 â€¢ Objective: maximize Î˜ = ğ‘# â‹… ğ‘¥, where ğ‘ = ğ‘!, â€¦ , ğ‘\" # - Can be written as Î˜ = âˆ‘$%! \" ğ‘$ â‹… ğ‘¥$ â€¢ Constraints: ğ´ â‹… ğ‘¥ â‰¤ ğ‘, where ğ´ = ğ‘$& is an ğ‘šÃ—ğ‘› matrix and ğ‘ = ğ‘!, â€¦ , ğ‘' # - Corresponds to ğ‘š constraints (1 â‰¤ ğ‘– â‰¤ ğ‘š): âˆ‘&%! \" ğ‘$& â‹… ğ‘¥& â‰¤ ğ‘$ â€¢ Note difference between variables (ğ’™) and parameters (ğ‘¨, ğ’ƒ, ğ’„): - Parameters are externally defined by the problem instance; e.g., topology, capacities of links, â€¦ - Variables can be varied within this problem instance; e.g., how much traffic flows over particular link 4 Every LP can be transformed to canonical form Minimization: minimize Î˜ ïƒ  maximize âˆ’Î˜ Greater-than constraint: ğ´ â‹… ğ‘¥ â‰¥ ğ‘ ïƒ  âˆ’ğ´ â‹… ğ‘¥ â‰¤ âˆ’ğ‘ Equality constraint: ğ´ â‹… ğ‘¥ = ğ‘ ïƒ  ğ´ â‹… ğ‘¥ â‰¤ ğ‘ âˆ§ âˆ’ğ´ â‹… ğ‘¥ â‰¤ âˆ’ğ‘ Variables with undefined sign: â€¢ Introduce two variables ğ‘¥$ ( and ğ‘¥$ ) â€¢ Replace each occurrence of ğ‘¥ by ğ‘¥$ ( âˆ’ ğ‘¥$ ) 5 Algorithms and complexity â€¢ Various algorithms exist for solving LPs: - Simplex: worst-case exponential complexity but fast in many practically relevant cases - Various interior-point methods have polynomial worst-case complexity - Karmarkar's algorithm is O ğ‘›*., â€¢ Currently best complexity is O ğ‘›-(!/!/ (https://arxiv.org/pdf/2004.07470.pdf) â€¢ Rule of thumb in practice: O ğ‘›* 6 Linear programming: a nice generic tool â€¢ Many problems can be expressed as LPs (we will see examples in this lecture) â€¢ Disadvantage: LPs are typically much slower than specialized algorithms â€¢ Advantages: - Writing an LP is much easier than developing a specialized algorithm - Efficient LP solvers are widely available and ready to use (e.g., CPLEX, Gurobi) - LPs can often be adapted easily for variations of a problem; specialized algorithms often donâ€™t work anymore (e.g., multi-commodity flow problem) 7 LP for flow problems 8 Max-flow problem as a linear program 9 S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 Max-flow problem as a linear program 10 S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 Objective: â€¢ Maximize flow from ğ‘† to ğ‘‡ Constraints: â€¢ Obey edge capacities, ğ‘ğ‘¢ğ‘£ Max-flow LP: what are the variables? 11 S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 Variables: â€¢ Flow ğ‘† â†’ ğ‘‡: ğ‘“ â€¢ Flow on edge ğ‘¢ â†’ ğ‘£: ğ‘“ğ‘¢ğ‘£ Objective: â€¢ maximize ğ‘“ Max-flow LP: given these variables and objective, what are the constraints? 12 Notation: â€¢ Outgoing edges of ğ‘£: ğ¸( ğ‘£ â€¢ Incoming edges of ğ‘£: ğ¸) ğ‘£ â€¢ Net outflow of ğ‘£: ğ¹ ğ‘£ = C 0âˆˆ2! 3 ğ‘“30 âˆ’ C 4âˆˆ2\" 3 ğ‘“43 Variables: â€¢ Flow ğ‘† â†’ ğ‘‡: ğ‘“ â€¢ Flow on edge ğ‘¢ â†’ ğ‘£: ğ‘“ğ‘¢ğ‘£ Objective: â€¢ maximize ğ‘“ Max-flow LP 13 Constraints: 1. Edge capacities: âˆ€ğ‘¢ â†’ ğ‘£ âˆˆ ğ¸: 0 â‰¤ ğ‘“ğ‘¢ğ‘£ â‰¤ ğ‘ğ‘¢ğ‘£ 2. Flow from ğ‘†: ğ‘“ = ğ¹ ğ‘† 3. Flow into ğ‘‡: ğ‘“ = âˆ’ğ¹ ğ‘‡ 4. Flow conservation: âˆ€ğ‘£ âˆˆ ğ‘‰ âˆ– {ğ‘†, ğ‘‡}: ğ¹ ğ‘£ = 0 Variables: â€¢ Flow ğ‘† â†’ ğ‘‡: ğ‘“ â€¢ Flow on edge ğ‘¢ â†’ ğ‘£: ğ‘“ğ‘¢ğ‘£ Objective: â€¢ maximize ğ‘“ Constraints: 1. Edge capacities: âˆ€ğ‘¢ â†’ ğ‘£ âˆˆ ğ¸: 0 â‰¤ ğ‘“ğ‘¢ğ‘£ â‰¤ ğ‘ğ‘¢ğ‘£ 2. Flow from ğ‘†: ğ‘“ = ğ¹ ğ‘† 3. Flow into ğ‘‡: ğ‘“ = âˆ’ğ¹ ğ‘‡ 4. Flow conservation: âˆ€ğ‘£ âˆˆ ğ‘‰ âˆ– {ğ‘†, ğ‘‡}: ğ¹ ğ‘£ = 0 Variables: â€¢ Flow ğ‘† â†’ ğ‘‡: ğ‘“ â€¢ Flow on edge ğ‘¢ â†’ ğ‘£: ğ‘“ğ‘¢ğ‘£ Objective: â€¢ maximize ğ‘“ Max-flow LP 14 Complexity: âˆ¼ O E ! Slower than Edmonds-Karp (O ğ‘‰ \" â‹… ğ¸ )! Multi-commodity flow (MCF) problem â€¢ Multiple commodities ğ›¼ that cannot be mixed: here ğ›¼ âˆˆ {1, 2, 3} â€¢ Each commodity has its own source ğ‘†5 and destination ğ‘‡5: - E.g., ğ‘†! = A, ğ‘‡! = H â€¢ Multiple possible objectives: - Maximize sum of flows of all commodities - Maximize minimum of all commodities - Define demand for each commodity and maximize average â€œfulfillment ratioâ€ â€¢ Best known solution is LP 15 B C G J Max-flow LP can be adapted easily to solve the MCF problem 16 Variables Objective Constraints â€¢ Flow ğ‘† â†’ ğ‘‡: ğ‘“ â€¢ Flow on edge ğ‘¢ â†’ ğ‘£: ğ‘“43 â€¢ Flow for comm. ğ›¼ ğ‘†5 â†’ ğ‘‡5: ğ‘“5 â€¢ Flow for comm. ğ›¼ on edge ğ‘¢ â†’ ğ‘£: ğ‘“5,43 maximize ğ‘“ maximize âˆ‘5 ğ‘“5 1. Edge capacities: âˆ€ğ‘¢ â†’ ğ‘£ âˆˆ ğ¸: â€¢ ğŸ â‰¤ ğ’‡ğ’–ğ’— â€¢ ğ’‡ğ’–ğ’— â‰¤ ğ’„ğ’–ğ’— 2. Flow from ğ‘†: ğ’‡ = ğ‘­ ğ‘º 3. Flow conservation: âˆ€ğ‘£ âˆˆ ğ‘‰ âˆ– {ğ‘†, ğ‘‡}: ğ‘­ ğ’— = ğŸ 1. Edge capacities: âˆ€ğ‘¢ â†’ ğ‘£ âˆˆ ğ¸: â€¢ ğŸ â‰¤ ğ’‡ğœ¶,ğ’–ğ’— â€¢ âˆ‘ğœ¶ ğ’‡ğ›‚,ğ’–ğ’— â‰¤ ğ’„ğ’–ğ’— 2. Flow from ğ‘†5: ğ’‡ğœ¶ = ğ‘­ğœ¶(ğ‘ºğœ¶) 3. Flow conservation: âˆ€ğ›¼, âˆ€ğ‘£ âˆˆ ğ‘‰ âˆ– {ğ‘†5, ğ‘‡5}: ğ‘­ğœ¶ ğ’— = ğŸ Notation ğ¹ ğ‘£ = âˆ‘0âˆˆ2! 3 ğ‘“30 âˆ’ âˆ‘4âˆˆ2\" 3 ğ‘“43 ğ¹5 ğ‘£ = âˆ‘0âˆˆ2! 3 ğ‘“5,30 âˆ’ âˆ‘4âˆˆ2\" 3 ğ‘“5,43 LP for shortest-path problems OK, letâ€™s try shortest path S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 18 Shortest-path problem as LP S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 Objective: â€¢ Minimize Sïƒ T path length (given edge lengths ğ‘¤43) Constraint: â€¢ â€œPathâ€ = connected edges 19 Shortest-path LP: What are variables and objective? S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 Variables: â€¢ Is edge ğ‘¢ â†’ ğ‘£ on SP? ğ‘¥43 Objective: â€¢ minimize âˆ‘4â†’3âˆˆ2 ğ‘¥43ğ‘¤43 Notation: â€¢ ğ‘‹ ğ‘£ = âˆ‘0âˆˆ2! 3 ğ‘¥30 âˆ’ âˆ‘4âˆˆ2\" 3 ğ‘¥43 20 Shortest-path LP: What are the constraints? Constraints: 1. Path ğ‘† â†’ ğ‘‡ is connected: âˆ€ğ‘£ âˆˆ ğ‘‰ âˆ– {ğ‘†, ğ‘‡}: ğ‘‹ ğ‘£ = 0 2. Path starts at ğ‘†: ğ‘‹ ğ‘† = 1 3. Possible values for ğ‘¥? â€¢ ğ‘¥ âˆˆ 0,1 ? â€¢ 0 â‰¤ ğ‘¥ â‰¤ 1 is sufficient (lucky!) Variables: Is edge ğ‘¢ â†’ ğ‘£ on SP? ğ‘¥43 Objective: minimize âˆ‘4â†’3âˆˆ2 ğ‘¥43ğ‘¤43 Notation: ğ‘‹ ğ‘£ = C 0âˆˆ2! 3 ğ‘¥30 âˆ’ C 4âˆˆ2\" 3 ğ‘¥43 21 7 Shortest path LP: What if multiple shortest paths exist? 22 S A C E D B G F H T I J 10 4 3 2 9 6 6 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 0 Shortest path LP: What if multiple shortest paths exist? 23 S A C E D B G F H T I J 10 4 3 2 9 6 6 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 x=0.7 x=0.7 x=0.7 x=0.3 x=0.3 x=0.3 x=0.3 0 â€¢ Even the LP with 0 â‰¤ ğ‘¥ â‰¤ 1 (no integer constraints) has an integral solution â€¢ Even the non-integral solutions â€¦ - â€¦ still give correct SP length; - â€¦ are easy to recover SP from Shortest-path LP: alternative formulation Shortest path LP: alternative formulation 25 S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 â€¢ Define du as distance Sâ†’u - dS = 0 â€¢ for each uâ†’v: dv â‰¤ du + wuv - dC â‰¤ 2 - dG â‰¤ dC + 8 - dG â‰¤ dA + 2 - â€¦ Shortest path LP: alternative formulation 26 S A C E D B G F H T I J 10 4 3 2 9 6 6 7 10 2 2 2 2 2 2 4 5 5 3 7 1 5 8 â€¢ Define du as distance Sâ†’u - dS = 0 â€¢ for each uâ†’v: dv â‰¤ du + wuv minimize dT Incorrect! We have to maximize. minimize This has a neat physical interpretation! 27 1 S A C D B F T 2 2 12 12 5 9 7 4 3 6 Now pull S and T apart as far as possible S A C D B FT This has a neat physical interpretation! 28 1 S A C D B F T 2 2 12 12 5 9 7 4 3 6 S A C D B FT Finding the shortest path using linear programming https://www.youtube.com/watch?v=2XRSxa03V5g 29 Integer linear programming Integer linear programming â€¢ Variables are restricted to integers â€¢ General space of integer linear programs (ILPs) is NP hard â€¢ This does not mean that every problem that can be expressed as an ILP is hard: Counterexample: maximize ğ‘¥ subject to ğ‘¥ = 0 solved efficiently 31 ïƒ  Do not try to prove that a problem is hard by expressing it as an ILP! â€¢ In practice, many ILPs can still be solved efficiently Summary: Linear programming is a powerful generic tool 32 Many problems can be formulated as LPs â€¢ Formulation not always trivial â€¢ Specialized algorithms often faster Variants of a problem often have similar LPs Writing LPs is non-trivial â€¢ Correctness can be difficult to see/prove â€¢ Some formulations are more efficient than others â€¢ Think of it as a highly restricted programming language Efficient solvers exist and are ready to use Be careful with integer LPs","libVersion":"0.3.2","langs":""}