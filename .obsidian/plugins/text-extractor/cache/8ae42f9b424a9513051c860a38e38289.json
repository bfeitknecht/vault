{"path":"sem4/FMFP/UE/slides/CN-u09-slides.pdf","text":"Computer Networks - Exercise 09 Framing, Error Detection/Correction, Physical Layer ETH Zürich Slides by Alice La Porta and Paul Ellsiepen Based on the work of Joël Vögtlin, Binică Nicolae, Diego de los Santos and Severin Obrist May 2025 - Link Layer - Framing - Error Detection - Error Correction - Physical Layer - What is the Physical Layer? - Signals - Modulation - Channels - Kahoot! - Exercise #9 2 Table of contents Framing 4 Link Layer Recap How is data actually sent between two nodes? Source: ﬂaticon.com Problem: We only get a stream of bits from Physical Layer. How do we get frames? Framing methods: 5 Framing Byte Stufﬁng Bit Stufﬁng - Special ﬂag byte value for start/end of frame - Must escape ﬂag and escape byte inside the frame - Flag is a sequence of six consecutive 1s - On transmit, after ﬁve 1s in the data, insert a 0 - On receive, a 0 after ﬁve 1s is deleted - Widely used in practice (i.e. frame packets over SONET optical links) - Byte stufﬁng, but with a twist: - To stuff a byte, add ESC before the byte, and XOR byte with 0x20 - To unstuff a byte, remove ESC before the byte, and XOR byte with 0x20 - Removes the FLAG from the contents of the frame 6 Point-to-Point Protocol (PPP) Error Detection Def: Minimum number of bit ﬂips needed to change from a codeword to another HD of a code: Minimum distance between any pair of valid codewords (of the code) Error detection: - Code with HD = d+1 ➡ up to d errors will always be detected Error correction: - Code with HD = 2d+1 ➡ up to d errors will always be corrected - Correct errors by mapping to the closest valid codeword 8 Hamming Distance (HD) Idea: We want to add check bits in the frames that are sent to detect errors Codeword = D data bits + R check bits Sender: - Compute R check bits based on the D data bits and send all D+R bits Receiver: - Recompute check bits based on the received data and compare with received check bits - Error if they don’t match 9 Error Detection - Parity bit - 1 check bit that is the sum of the D bits (modulo 2) - Hamming Distance = 2 ➡ detect 1, correct 0 errors - Checksum - Sum up data in N-bit words (i.e. for TCP, N=16) - Use 1s complement arithmetic (add carrier back and negate the result) - Hamming Distance = 2 ➡ detect 1, correct 0 errors - Cyclic Redundancy Check (CRC) 10 Error Detection Codes - Given D data bits, generate R check bits, such that the D+R bits are divisible by a generator value C - Note: C represents a binary polynomial; |C| = R + 1 - Sender: - Extend the D data bits with R zeros - Divide by the generator value C - Keep remainder, ignore quotient - Set the R check bits using the reminder - Receiver: - Divide coderword by C and check for zero reminder - Hamming Distance = 4 ➡ detects up to 3 errors - Not vulnerable to systematic errors (i.e. moving data around) 11 Cyclic Redundancy Check (CRC) Error Correction - Use D = 2 R - R - 1 bits of data; R check bits - Check bits in positions p = 2 l, 0 ≤ l < R - Sender: - Encode each checkbit like a parity bit of positions with a p term in their binary sum - Receiver - Recompute check bits and arrange them as a binary number (called syndrome) - Syndrome gives error position or is 0 if there is no error - Flip bit to correct if needed - Hamming Distance = 3 ➡ Corrects up to 1 error 13 Hamming Code When should we use Detection or Correction? Error Correction: - When errors are expected, happen often - Only small errors are worth correcting - When we can’t afford to retransmit Error Detection: - When errors are rare, not expected - When errors are large 14 Detection vs Correction Physical Layer In the physical layer, we are concerned about how to use signals to transfer message bits over a link We want to send digital bits but have to use analog signals to do so 16 What is the Physical Layer? 01101110011001010111011001100101 01101110011001010111011001100101 Media propagates signals that carry bits of information, we want to know what happens to them as they propagate 17 Signals Over Fiber (Light) - Very low attenuation in 3 frequency bands Over Wireless (Radio Waves) - Travel at c, spread out and attenuate faster than 1/distance 2 - Multipath Over a wire (Twisted Pair, Coaxial, etc.) - Propagates at ⅔ c - Attenuation - High attenuation for higher frequencies - Noise is added 18 Frequency representation A signal over time can be represented by its frequency components (Fourier analysis) Fewer frequencies (less bandwidth) degrades the signal Modulation deals with how to represent bits using analog signals Baseband modulation: Signal sent directly on the wire Non-Return to Zero: 1 → High Voltage, 0 → Low voltage In practice: Other engineering consideration like clock recovery 19 Modulation - Baseband Modulation - Non-return to Zero Inverted (NRZI): Invert the signal level on 1 to break up long runs of 1 - 4B/5B: Map every 4 data bits into 5 code bits using a mapping that ensures that there are at most 3 zeros in a row 20 Modulation - Baseband Modulation Source: https://commons.wikimedia.org/wiki/File:NRZI_example.png Baseband modulation does not work well over ﬁber/wireless Passband modulation works by modulating a carrier (a signal oscillating at a given frequency). It is modulated by changing amplitude, frequency or phase. 21 Modulation - Passband Modulation Important properties: Bandwidth B, Signal Strength S, Noise Strength N Nyquist Limit: - Maximum symbol rate is 2B - For V signal levels: maximum bitrate is R = 2B ᐧ log 2(V) bits/second (without noise) Shannon Capacity: - Maximum information carrying rate of the channel - C = B ᐧ log 2(1+S/N) bits/second 22 Channels KahootExercise #9 Question 1: Spanning Tree 25 Consider the network shown in the ﬁgure below, where the letters A to J represent LANs and the circles B1 to B7 represent switches Question 1: Spanning Tree 26 1) Which ports are not selected by the spanning tree algorithm? Switches Tx 0 Rx 0 Tx 1 Rx 1 Tx 2 Rx 2 B1 B1, B1, 0 — B1, B1, 0 — B1, B1, 0 — B2 B2, B2, 0 — B2, B2, 0 B2, B1, 2 B2, B1, 2 — B3 B3, B3, 0 B3, B1, 1 B3, B1, 1 B3, B1, 1 B3, B1, 1 — B4 B4, B4, 0 B4, B3, 1 B4, B3, 1 B4, B1, 2 B4, B1, 2 — B5 B5, B5, 0 B5, B2, 1 B5, B2, 1 B5, B1, 2 B5, B1, 2 — B6 B6, B6, 0 B6, B3, 1 B6, B3, 1 B6, B1, 2 B6, B1, 2 — B7 B7, B7, 0 B7, B1, 1 B7, B1, 1 — B7, B1, 1 — Question 1: Spanning Tree 27 Consider the network shown in the ﬁgure below, where the letters A to J represent LANs and the circles B1 to B7 represent switches 1) Which ports are not selected by the spanning tree algorithm? Question 1: Spanning Tree 28 2) Indicate which ports are not selected by the spanning tree algorithm after the recovery process when a new tree has been formed. Question 2: Forwarding 29 Consider hosts A, C, E and switches S1 to S6 with empty forwarding tables initially, connected as the ﬁgure below shows. The address of Sx is 00:00:00:00:00:0x. Question 2: Forwarding 30 1) Which links are removed after the completion of the spanning tree? Use the lowest switch address to break ties. Question 2: Forwarding 31 2) Backward learning, ﬁll in the forwarding table Question 3: Modulation & Encoding 32 1) Multiple Choice ● In baseband modulation the bit stream is directly send onto the wire ● In baseband modulation the bit stream is transmitted by sending a modulated carrier frequency signal ● In passband modulation the bit stream is directly send onto the wire ● In passband modulation the bit stream is transmitted by sending a modulated carrier frequency signal Question 3: Modulation & Encoding 33 1) Multiple Choice ● In baseband modulation the bit stream is directly send onto the wire ● In baseband modulation the bit stream is transmitted by sending a modulated carrier frequency signal ● In passband modulation the bit stream is directly send onto the wire ● In passband modulation the bit stream is transmitted by sending a modulated carrier frequency signal Question 3: Modulation & Encoding 34 1) Multiple Choice ● In baseband modulation the bit stream is directly send onto the wire ● In baseband modulation the bit stream is transmitted by sending a modulated carrier frequency signal ● In passband modulation the bit stream is directly send onto the wire ● In passband modulation the bit stream is transmitted by sending a modulated carrier frequency signal Question 3: Modulation & Encoding 35 1) Multiple Choice ● In baseband modulation the bit stream is directly send onto the wire ● In baseband modulation the bit stream is transmitted by sending a modulated carrier frequency signal ● In passband modulation the bit stream is directly send onto the wire ● In passband modulation the bit stream is transmitted by sending a modulated carrier frequency signal Question 3: Modulation & Encoding 36 1) Multiple Choice ● In baseband modulation the bit stream is directly send onto the wire ● In baseband modulation the bit stream is transmitted by sending a modulated carrier frequency signal ● In passband modulation the bit stream is directly send onto the wire ● In passband modulation the bit stream is transmitted by sending a modulated carrier frequency signal Question 3: Modulation & Encoding 37 2) Encoding Consider the binary message 1010 1110 0001 to be baseband encoded. Draw the message encoded using non-return-to-zero (NRZ) and non-return-to- zero-inverted (NRZI). You can assume that a high logic level maps to the bit 1 in non-return-to-zero, and that the signal starts at high logic level. Question 3: Modulation & Encoding 38 2) Encoding In NRZ the signal directly reﬂects the input. In NRZI the signal is inverted for every occurring 1 1 0 1 0 1 1 1 0 0 0 0 1 Question 3: Modulation & Encoding 39 3) Encoding What is the message encoded using 4B5B? Solution: Under 4B5B encoding, we map 1010 -> 10110, 1110 -> 11100, and 0001 -> 01001, resulting in the message 1011 0111 0001 001 Question 3: Modulation & Encoding 40 4) NRZ(I) Draw the result from Question 3.3, encoded using non-return-to-zero (NRZ) and non-return-to-zero-inverted (NRZI). Question 3: Modulation & Encoding 41 5) 4B5B Compare the resulting signals from Q3.1 and Q3.3. Why is it beneﬁcial to use 4B5B encoding? Are there any disadvantages? Solution: Mainly for clock recovery. There are more transitions in 4B5B-encoded signals. This allows for clock recovery to prevent resynchronisation after long runs of 0s or 1s Question 3: Modulation & Encoding 42 6) Modulations Match the following Waveforms with their respective waveforms NZR signal Amplitude Key Shifting Phase key Shifting Frequency key Shifting Question 4: Framing & Error Correction 43 The message 0110 0111 1110 0000 0111 1110 1111 1001 is to be transmitted. 1.a) Flag bytes with byte stufﬁng (FLAG = 0111 1110, ESC = 1110 0000) ● The message contains an occurrence of the ESC pattern at the second byte and an occurrence of the FLAG pattern at the third byte: 0110 0111 1110 0000 0111 1110 1111 1001 ● We escape each of these by inserting the ESC pattern directly before them, resulting in the stuffed byte string: 0110 0111 1110 0000 1110 0000 1110 0000 0111 1110 1111 1001 ● Finally, we surround the stuffed message with the ﬂag bytes, to get the ﬁnal framing: 0111 1110 0110 0111 1110 0000 1110 0000 1110 0000 0111 1110 1111 1001 0111 1110 Question 4: Framing & Error Correction 44 The message 0110 0111 1110 0000 0111 1110 1111 1001 is to be transmitted. 1.b) Starting and ending ﬂag bits with bit stufﬁng (FLAG = 0111 1110) ● Recall that in bit stufﬁng, we insert a zero-bit after every sequence of 5 one-bits. The above message would thus be stuffed as: 0110 0111 11010 0000 0111 11010 1111 10001 ● The ﬂag byte is then prepended and appended to the stuffed string. 0111 1110 0110 0111 11010 0000 0111 11010 1111 10001 0111 1110 Question 4: Framing & Error Correction 45 A 32-bit message is transmitted using a Hamming code. 2) How many check bits are needed to properly detect and correct 1-bit errors in this 32-bit message? For data of length n, the length of the Hamming code is given by n+k = (2^k)-1, where k is the number of check bits to detect and correct an error in one bit (minimum Hamming distance of 3). Thus, 5 check bits can support correcting (2^5) - 5 - 1 = 26 message bits, and 6 check bits can support correcting one error in (2^6) - 6 - 1 = 57 bits. Finally, to correct an error in 32 bits, we would need 6 check bits. Question 4: Framing & Error Correction 46 You wish to transmit the frame containing 1001 0110 010 with a CRC attached. Your generator polynomial is (x^3) + 1 and k = 3. 3) What bit string would be transmitted? The generator polynomial converted to binary is: In the following we abuse notation such that e.g corresponds to CRC encoding has 3 steps: 1. Shift the message to the left by k (padded with zeros) 2. Divide by the generator polynomial and compute the remainder 3. Insert the remainder to the end of the original message (instead of the padded zeros) We perform the polynomial division and obtain: The ﬁnal result is obtained by adding the remainder 100 to the left-shifted bit string: 1001 0110 0101 00 Extra slidesSockets - Software abstraction by which an application process exchanges network messages with the (transport layer in the) operating system - Bridge between application and transport layer - 2 important types: - UDP Socket: SOCK_DGRAM - TCP Socket: SOCK_STREAM 49 Sockets 50 Ports - Transport layer identiﬁer (16 bits) - Allows more apps on the same IP - Ports stored in packets (transport layer) - Sockets stored in the OS - “Well-known” ports: 0-1023 - Agreement on which services run on these ports - i.e. ssh:22, http:80, https:443 - Ephemeral ports: most of 1024-65535 - Given to clients/applications at random - Connection Mappings (stored by the OS): - UDP: (local port, local IP) - TCP: (local port, local IP, remote port, remote IP) - If we just listen on a port (i.e. port 80 for TCP), we don’t need remote IP/port - Changing IP on TCP connection ➡ Connection is broken - UDP connection usually need app-layer multiplexing 51 Connections 52 Many ways/tools to do this! Run any of these commands: - netstat -tulpn - ss -tulpn - lsof -Pn -i4 - Many more available, different ﬂags etc Running the last command, we get: How to see what ports you are using? Local Ip Local Ports Remote IP Remote Port Circuits and Matchings Motivation: Many possible connections available at the switch level, not all can happen at the same time. We want to utilize the switch in the best way possible 54 Circuits","libVersion":"0.5.0","langs":""}