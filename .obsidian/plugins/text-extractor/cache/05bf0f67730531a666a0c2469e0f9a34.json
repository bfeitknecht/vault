{"path":"sem4/DMDB/VRL/extra/slides/DMDB-functional-s08-dependencies.pdf","text":"Data Modeling and Databases Spring Semester 2025 Nulls and Views Functional Dependencies Gustavo Alonso Institute of Computing Platforms Department of Computer Science ETH ZÃ¼rich 1 Lessons learned so far â€¢ In the last two lectures we saw different extension to SQL and how data is manipulated to deal with special cases â€¢ We also saw how to enforce constraints to guarantee that the semantics of the schema are preserved and to prevent errors in the data â€¢ In this and the next lecture we will cover functional dependencies and normal forms as a way to provide a more formal basis for designing schemas and deciding what constraints are needed when organizing data. Functional Dependencies 2 Entity Relationship Model (looking back) Functional Dependencies 3 Logical Modelling Entity- relationship Model Relational Model â–ª Relational Model - Schema â¢ Database Schema: A Set of Relation Schemas â¢ Relation Schema: Name, A Set of Attributes/Fields/Colu mns, Primary key â¢ Field/Attribute: Name, Domain (e.g., Integer, String) Students(sid: string, name: string, login: string, age: int, gpa: float) sid name login age gpa Students Functional Dependencies 4 ER Diagram is a (Graphical) Constraint Lanaguage âˆ€ğ‘, ğ‘, ğ‘: ğ‘… ğ‘, ğ‘, ğ‘ â‡’ ğ´ ğ‘ âˆ§ ğµ ğ‘ âˆ§ ğ¶(ğ‘) âˆ€ğ‘, ğ‘, ğ‘: ğ‘… ğ‘, ğ‘, ğ‘ â‡’ Â¬âˆƒğ‘â€². ğ‘… ğ‘, ğ‘, ğ‘â€² âˆ§ ğ‘â€² â‰  ğ‘ âˆ€ğ‘, ğ‘, ğ‘: ğ‘… ğ‘, ğ‘, ğ‘ â‡’ Â¬âˆƒğ‘â€². ğ‘… ğ‘, ğ‘â€², ğ‘ âˆ§ ğ‘â€² â‰  ğ‘ A(a) B(b) C(c) R(a, b, c) Enforced by the primary key UNIQUE Foreign Keys Functional Dependencies 5 Merging tables with the same key â€¢ Cardinality can be tricky. â€¢ Consider the following two relations â€¢ It can be merged into â€¢ Whatâ€™s the benefit/disadvantage of merging? ssn did since Works_in ssn name Employees ssn name did since Employees Functional Dependencies 6 How to capture redundancy? â€¢ Cardinality can be tricky. â€¢ Consider the following two relations â€¢ Can we merge it into: â€¢ This is often bad. (redundancy of data (budget)) ssn did since Works_in did budget Department ssn did since budget Works_in_Dept Functional Dependencies 7 Database Design Theory â€¢ What is a good database design? â€¢ How to formally model and enforce the properties we want in a good design? â€¢ Answer â€¢ Functional dependencies â€¢ Normal forms Application Design 1 Design 1 Design Nâ€¦ Functional Dependencies 8 Functional Dependencies Functional Dependencies 9 A Bad Database Schema â€¢ What are the problems of this schema? â€¢ Update-Anomaly â€¢ What happens when student 1 changes address? â€¢ Insert-Anomaly â€¢ Delete-Anomaly â€¢ What if student 1 drops all courses â€¢ Data Redundancy is the problem here sid course grade name address 1 A 4 Smith Home 1 B 5 Smith Home 1 C 6 Smith Home Functional Dependencies 10 Problems with Redundancy â€¢ Waste of storage space â€¢ Additional work to keep multiple copies of data consistent â€¢ Multiple updates in order to accommodate one event â€¢ Additional code to keep multiple copies of data consistent â€¢ Somebody needs to implement the logic sid course grade name address 1 A 4 Smith Home 1 B 5 Smith Home 1 C 6 Smith Home Functional Dependencies 11 Redundancy is not Always Bad â€¢ Through redundancy it is possible to improve locality â€¢ Space (memory, disk) is no longer the problem it used to be => tradeoff space/performance â€¢ Sometimes, redundancy is needed => fault tolerance, availability sid course grade name address 1 A 4 Smith Home 1 B 5 Smith Home 1 C 6 Smith Home Functional Dependencies 12 Redundancy â€¢ No matter whether redundancy is good or bad, we want to understand: â€¢ How to model data redundancy? â€¢ How to reason about redundancy? â€¢ One type of redundancy: â€¢ {sid} decides name, address â€¢ {sid, course} decides grade â€¢ One notion: Functional Dependency sid course grade name address 1 A 4 Smith Home 1 B 5 Smith Home 1 C 6 Smith Home Functional Dependencies 13 Functional Dependency â€¢ Schema: Relation e.g., â„›(ğ´:ğ·_ğ´,ğµ:ğ·_ğµ,ğ¶:ğ·_ğ¶,ğ·:ğ·_ğ·) â€¢ Instance: ğ‘…âŠ†ğ·_ğ´Ã—ğ·_ğµÃ—ğ·_ğ¶Ã—ğ·_ğ· â€¢ Let ğ›¼âŠ†â„›, ğ›½âŠ†â„› â€¢ ğ›¼ is a subset of columns/attributes, e.g., ğ›¼={ğ´, ğ¶}. â€¢ Functional Dependency: ğ›¼â†’ğ›½ iff. âˆ€ğ‘Ÿ, ğ‘ âˆˆğ‘…:ğ‘Ÿ.ğ›¼=ğ‘ .ğ›¼â‡’ğ‘Ÿ.ğ›½=ğ‘ .ğ›½ â€¢ i.e., ğ›¼â†’ğ›½ iff., for any two tuples r and s in DB instance R, if r and s share the same value on columns ğ›¼, then they share the same values on on column ğ›½ â€¢ i.e., there is a function mapping values in columns ğ›¼ to values in columns in ğ›½ â€¢ We write ğ‘…âŠ¨ğ›¼â†’ğ›½ if ğ‘… satisfies ğ›¼â†’ğ›½. Functional Dependencies 14 Functional Dependency â€¢ Schema: Relation â„›(ğ´:ğ·_ğ´,ğµ:ğ·_ğµ,ğ¶:ğ·_ğ¶,ğ·:ğ·_ ) â€¢ Instance: ğ‘…âŠ†ğ·_ğ´Ã—ğ·_ğµÃ—ğ·_ğ¶Ã—ğ·_ğ· â€¢ Let ğ›¼âŠ†â„›, ğ›½âŠ†â„› â€¢ ğ›¼ is a subset of columns, e.g., ğ›¼={ğ´, ğ¶}. â€¢ Functional Dependency: ğ›¼â†’ğ›½ iff. âˆ€ğ‘Ÿ, ğ‘ âˆˆğ‘…:ğ‘Ÿ.ğ›¼=ğ‘ .ğ›¼â‡’ğ‘Ÿ.ğ›½=ğ‘ .ğ›½ A B C D a4 b2 c4 d3 a1 b1 c1 d1 a1 b1 c1 d2 a2 b2 c3 d2 a3 b2 c4 d3 ğ‘… Find all FDs: â€¢ ğ‘… âŠ¨ {A} -> {B} â€¢ ğ‘… âŠ¨ {C, D} -> {B} â€¢ ğ‘… âŠ­ {B} -> {C} â€¢ Convention: CD -> B for {C, D} -> {B} Functional Dependencies 15 Functional Dependency - Example Find all FDs: â€¢ Child -> Father, Mother â€¢ Child, Grandpa -> Grandma â€¢ Child, Grandma -> Grandpa Functional Dependencies 16 Analogy to Functions â€¢ f1: Child -> Father â€¢ E.g., f1(Niklas) = Alfons â€¢ FD1: Child -> Father Functional Dependencies 17 Keys: Defined via Functional Dependency â€¢ ğ›¼âŠ†â„› is a superkey iff â€¢ ğ›¼â†’â„›. (â„› here means all columns) â€¢ This means that if we know the value of columns ğ›¼, we know the value for the rest of the columns in â„›. => ğ›¼ must be a superset of a key. â€¢ ğ›¼â†’ğ›½ is minimal iff â€¢ âˆ€ğ´âˆˆğ›¼:(ğ›¼âˆ’{ğ´})â†›ğ›½ â€¢ Notation for minimal functional dependencies: â€¢ ğ›¼â†’^. ğ›½ â€¢ ğ›¼âŠ†â„› is a candidate key iff ğ›¼â†’^. â„› Functional Dependencies 18 Keys - Example â€¢ Find FDs: â€¢ Name, Canton -> AreaCode, Population â€¢ Name, AreaCode -> Canton, Population â€¢ Keys of town: â€¢ {Name, Canton} â€¢ {Name, AreaCode} â€¢ Note that two small towns may have the same area code Functional Dependencies 19 Keys and Cardinalities â€¢ Cardinalities define functional dependencies â€¢ Functional dependencies determine keys â€¢ Not all functional dependencies are derived from the cardinality information Lecture teaches Professor 1N Department 1 â€¢ Professor, Lecture -> Department â€¢ Department, Lecture -> Professor â€¢ Lecture -/-> Department, Professor Functional Dependencies 20 Working with Functional Dependencies Functional Dependencies 21 Which functional dependencies? â€¢ Input: We are given a set of FDs F â€¢ How to find new FDs that can be â€œimpliedâ€ from this set of FDs? (Inference) â€¢ The fundamental question: Will we â€œhaveâ€ ğ›¼â†’ğ›½ given F? â€¢ Two ways to define â€œhaveâ€: â€¢ ğ¹ âŠ¨ğ›¼â†’ğ›½: Semantics â€“ Any R that satisfies F will also satisfy ğ›¼â†’ğ›½ â€¢ ğ¹âŠ¢ğ›¼â†’ğ›½: Syntax â€“ We can derive ğ›¼â†’ğ›½ by applying a set of inference rules over F â€¢ Armstrongâ€™s Axioms â€¢ Fundamental result: â€¢ ğ¹ âŠ¨ğ›¼â†’ğ›½âŸºğ¹âŠ¢ğ›¼â†’ğ›½. (when âŠ¢ is defined by Armstrongâ€™s Axioms) Functional Dependencies 22 Inference of functional dependencies â€¢ Input: We are given a set of FDs â€¢ How to find new FDs that can be â€œimpliedâ€ from this set of FDs? (Inference) â€¢ More precisely: â€¢ Let ğ¹ be a set of FDs on scheme â„› andğ›¼â†’ğ›½be another FD on â„›. Then, ğ‘­ implies ğœ¶â†’ğœ·, denoted by ğ¹ âŠ¨ğ›¼â†’ğ›½, if every relation instance ğ‘¹ of ğ“¡ that satisfies all FDs in ğ‘­ also satisfiesğ›¼â†’ğ›½. â€¢ Let ğ¹ be a set of FDs on scheme â„›. Then, the closure of ğ¹, denoted by ğ¹^+, is the set of all FDs implied by ğ¹. â€¢ Let ğ¹ and ğº be sets of FDs on scheme â„›. Then, ğ¹ and ğº are equivalent, denoted by ğ¹\"â‰¡G\", if ğ¹ âŠ¨ğº and ğºâŠ¨ğ¹. â€¢ Is there a systematic way to compute the closure? Is there a systematic way to do inference? Is there a systematic way to check ğ¹ âŠ¨ğ‘“ and ğ¹\"â‰¡G\"? Functional Dependencies 23 Armstrong Axioms: Inference of FDs â€¢ Reflexivity â€¢ ğ›¼âŠ†ğ›½â‡’ğ›½â†’ ğ›¼ â€¢ Special case: â„›â†’ ğ›¼ â€¢ We call these FDs trivial FDs. â€¢ Augmentation â€¢ ğ›¼â†’ ğ›½â‡’ğ›¼ğ›¾â†’ ğ›½ğ›¾ â€¢ (Notation ğ›¼ğ›¾ := ğ›¼ âˆª ğ›¾) â€¢ Transitivity â€¢ ğ›¼â†’ ğ›½âˆ§ğ›½â†’ ğ›¾â‡’ğ›¼â†’ ğ›¾ â€¢ These three axioms are both complete and sound. All possible other FDs can be implied from these axioms. Functional Dependencies 24 Armstrong Axioms: Inference of FDs â€¢ Reflexivity â€¢ ğ›¼ âŠ† ğ›½ â‡’ ğ›½â†’ğ›¼ â€¢ â€œSemantic Soundnessâ€: â€¢ Assume that ğ›¼ âŠ† ğ›½, we hope to prove that âˆ€ğ‘¡1, ğ‘¡2 âˆˆ ğ‘…, ğ‘¡1 ğ›½ = ğ‘¡2 ğ›½ â‡’ ğ‘¡1 ğ›¼ = ğ‘¡2[ğ›¼] â€¢ Let ğ‘¡1, ğ‘¡2 be two arbitrary tuples such that ğ‘¡1 ğ›½ = ğ‘¡2[ğ›½], assume ğ‘¡1 ğ›¼ â‰  ğ‘¡2[ğ›¼] â€¢ This implies that there exists a column ğ‘ âˆˆ ğ›¼, ğ‘¡1 ğ‘ â‰  ğ‘¡2[ğ‘] â€¢ Because ğ›¼ âŠ† ğ›½, ğ‘ âˆˆ ğ›½ , therefore ğ‘¡1 ğ›½ â‰  ğ‘¡2[ğ›½]. Contradict. We must have ğ‘¡1 ğ›¼ = ğ‘¡2[ğ›¼]. Functional Dependencies 25 Armstrong Axioms: Inference of FDs â€¢ Augmentation â€¢ ğ›¼â†’ğ›½ â‡’ ğ›¼ğ›¾â†’ğ›½ğ›¾ â€¢ â€œSemantic Soundnessâ€: â€¢ Prove by contradiction. Assume that: â€¢ ğ›¼ â†’ ğ›½ is true â€¢ ğ›¼ğ›¾ â†’ ğ›½ğ›¾ is false. â€¢ Because ğ›¼ğ›¾ â†’ ğ›½ğ›¾ is false, we have that there exists ğ‘¡1, ğ‘¡2: ğ‘¡1 ğ›¼ğ›¾ = ğ‘¡2[ğ›¼ğ›¾] and ğ‘¡1 ğ›½ğ›¾ â‰  ğ‘¡2[ğ›½ğ›¾]. As a result: â€¢ ğ‘¡1 ğ›¼ = ğ‘¡2[ğ›¼]. (from ğ‘¡1 ğ›¼ğ›¾ = ğ‘¡2[ğ›¼ğ›¾]) â€¢ ğ‘¡1 ğ›½ â‰  ğ‘¡2[ğ›½]. â€¢ This contradicts with â€œğ›¼ â†’ ğ›½â€ Functional Dependencies 26 Armstrong Axioms: Inference of FDs â€¢ Transitivity â€¢ ğ›¼â†’ğ›½ âˆ§ ğ›½â†’ğ›¾ â‡’ ğ›¼â†’ğ›¾ â€¢ â€œSemantic Soundnessâ€: â€¢ From ğ›¼â†’ğ›½, we know that â€¢ âˆ€ğ‘¡1, ğ‘¡2, ğ‘¡1 ğ›¼ = ğ‘¡2 ğ›¼ â‡’ ğ‘¡1 ğ›½ = ğ‘¡2[ğ›½] â€¢ From ğ›½â†’ğ›¾, we know that â€¢ âˆ€ğ‘¡1, ğ‘¡2, ğ‘¡1 ğ›½ = ğ‘¡2 ğ›½ â‡’ ğ‘¡1 ğ›¾ = ğ‘¡2[ğ›¾] â€¢ Combine both, we get â€¢ âˆ€ğ‘¡1, ğ‘¡2, ğ‘¡1 ğ›¼ = ğ‘¡2 ğ›¼ â‡’ ğ‘¡1 ğ›¾ = ğ‘¡2[ğ›¾] Functional Dependencies 27 Armstrong Axioms: Inference of FDs â€¢ Reflexivity â€¢ Augmentation â€¢ Transitivity â€¢ All proofs are simple and natural. â€¢ What is very useful in practice: â€¢ These three axioms are both complete and sound. All possible other FDs can be implied from these axioms. Functional Dependencies 28 Armstrong Axioms: Soundness â€¢ Let ğ¹ be a set of FDs on scheme â„› and ğ‘“ be another FD on â„›. Then, ğ‘­ derives ğœ¶ â†’ ğœ·, denoted by ğ¹ âŠ¢ ğ›¼ â†’ ğ›½, if there is a derivation for ğ’‡ using only Armstrongâ€™s axioms. â€¢ Let ğ¹ be a set of FDs on scheme â„› and ğ‘“ be another FD on â„›. Then, ğ‘­ implies ğœ¶ â†’ ğœ·, denoted by ğ¹ âŠ¨ ğ›¼ â†’ ğ›½, if every relation instance ğ‘¹ of ğ“¡ that satisfies all FDs in ğ‘­ also satisfies ğ’‡. â€¢ Soundness: â€¢ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â‡’ ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ â€¢ This is relatively easy to see: â€¢ Prove by induction â€¢ start from a formula derived with ğ¾ âˆ’ 1 applications of Armstrongâ€™s axioms â€¢ Prove that the one derived by applying one more axiom (ğ¾ applications) is still correct. Functional Dependencies 29 Armstrong Axioms: Completeness â€¢ Completeness: â€¢ ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ â‡’ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â€¢ How to prove it? â€¢ [Closure] Let ğ¹ be a set of FDs over â„›, ğ›¼ âŠ† â„› is a set of attributes of â„›. The closure of ğœ¶ with respect to ğ‘­, ğœ¶ +, is the set of all attributes ğ‘¦ âˆˆ â„› such that ğ›¼ â†’ ğ‘¦ can be derived from ğ¹ using Armstrongâ€™s axioms. I.e., ğ›¼+ = ğ‘¦ âˆˆ â„› ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦} â€¢ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â‡” ğ›½ âŠ† ğ›¼+ â€¢ Proof: â€¢ (=>) Assume ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ and âˆ€ğ‘¦ âˆˆ ğ›½, â€¢ ğ¹ âŠ¢ ğ›½ â†’ ğ‘¦ (Reflexivity) â€¢ ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦ (Transitivity) As a result:ğ‘¦ âˆˆ ğ›¼+. Therefore ğ›½ âŠ† ğ›¼+ Functional Dependencies 30 Armstrong Axioms: Completeness â€¢ Completeness: â€¢ ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ â‡’ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â€¢ How to prove it? â€¢ [Closure] Let ğ¹ be a set of FDs over â„›, ğ›¼ âŠ† â„› is a set of attributes of â„›. The closure of ğœ¶ with respect to ğ‘­, ğœ¶+, is the set of all attributes ğ‘¦ âˆˆ â„› such that ğ›¼ â†’ ğ‘¦ can be derived from ğ¹ using Armstrongâ€™s axioms. I.e., ğ›¼+ = ğ‘¦ âˆˆ â„› ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦} â€¢ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â‡” ğ›½ âŠ† ğ›¼+ â€¢ Proof: â€¢ (<=) Assume ğ›½ âŠ† ğ›¼+, prove that âˆ€ğ‘¦ âˆˆ ğ›½: ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦. â€¢ It is easy to prove that ğ‘‹ â†’ ğ‘Œ âˆ§ ğ‘‹ â†’ ğ‘ â‡’ ğ‘‹ â†’ ğ‘Œğ‘ (go back to the definition of FD) â€¢ Therefore (âˆ€ğ‘¦ âˆˆ ğ›½: ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦) â‡’ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ Functional Dependencies 31 Armstrong Axioms: Completeness â€¢ Completeness: â€¢ ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ â‡’ ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â€¢ Proof â€¢ Suppose ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ but ğ¹ âŠ¬ ğ›¼ â†’ ğ›½ (i.e., ğ›¼ â†’ ğ›½ cannot be inferred from the axioms, even it holds under F) â€¢ We know that ğ›½ âŠˆ ğ›¼+. (From ğ¹ âŠ¢ ğ›¼ â†’ ğ›½ â‡” ğ›½ âŠ† ğ›¼+) â€¢ Our goal is to construct a relation instance ğ‘…, such that ğ¹ holds but ğ›¼ â†’ ğ›½ does not (i.e., ğ¹ âŠ­ ğ›¼ â†’ ğ›½) â€¢ Step 1: Prove that ğ‘… does not satisfy ğ›¼ â†’ ğ›½ â€¢ Easy: ğ›¼ is a subset of ğ›¼+, ğ›½ is not a subset of ğ›¼+ â€¢ Step 2: Prove that ğ‘… satisfies ğ¹: â€¢ Suppose ğ›¾ â†’ ğœƒ âˆˆ ğ¹. If ğ›¾ âŠ† ğ›¼+, then we have ğ¹ âŠ¢ ğ›¼ â†’ ğ›¾, by transitivity, ğ¹ âŠ¢ ğ›¼ â†’ ğœƒ. Therefore ğœƒ âŠ† ğ›¼+. We have ğ‘… âŠ¨ ğ›¾ â†’ ğœƒ â€¢ If ğ›¾ âŠˆ ğ›¼+, we have ğ›¾ will take different values in ğ‘…, thus ğ‘… âŠ¨ ğ›¾ â†’ ğœƒ â€¢ Put these two steps together, we get a counter example of ğ¹ âŠ¨ ğ›¼ â†’ ğ›½ given ğ¹ âŠ¬ ğ›¼ â†’ ğ›½. ğœ¶+ ğ“¡ \\ ğœ¶+ 111111â€¦111 000â€¦.000 111111â€¦111 111â€¦111 R Functional Dependencies 32 Other Rules â€¢ Union of FDs: â€¢ ğ›¼ â†’ ğ›½ âˆ§ ğ›¼ â†’ ğ›¾ â‡’ ğ›¼ â†’ ğ›½ğ›¾ â€¢ Proof (using Armstrongâ€™s Axioms): â€¢ ğ›¼ â†’ ğ›½. (given) â€¢ ğ›¼ â†’ ğ›¾. (given) â€¢ ğ›¼ â†’ ğ›¼ğ›¾. (augmentation) â€¢ ğ›¼ğ›¾ â†’ ğ›½ğ›¾. (augmentation) â€¢ ğ›¼ â†’ ğ›½ğ›¾. (transitivity) Functional Dependencies 33 Other Rules â€¢ Decomposition: â€¢ ğ›¼ â†’ ğ›½ğ›¾ â‡’ ğ›¼ â†’ ğ›½ âˆ§ ğ›¼ â†’ ğ›¾ â€¢ Proof (using Armstrongâ€™s Axioms): â€¢ ğ›¼ â†’ ğ›½ğ›¾. (given) â€¢ ğ›½ğ›¾ â†’ ğ›½. (reflexivity) â€¢ ğ›¼ â†’ ğ›½. (transitivity) â€¢ Similar we can prove ğ›¼ â†’ ğ›¾. Functional Dependencies 34 Other Rules â€¢ Pseudo transitivity: â€¢ ğ›¼ â†’ ğ›½ âˆ§ ğ›½ğ›¾ â†’ ğœƒ â‡’ ğ›¼ğ›¾ â†’ ğœƒ â€¢ Proof (using Armstrongâ€™s Axioms): â€¢ ğ›¼ â†’ ğ›½. (given) â€¢ ğ›¼ğ›¾ â†’ ğ›½ğ›¾. (augmentation) â€¢ ğ›½ğ›¾ â†’ ğœƒ. (given) â€¢ ğ›¼ğ›¾ â†’ ğœƒ. (transitivity) Functional Dependencies 35 More about Closure â€¢ [Closure] Let ğ¹ be a set of FDs over â„›, ğ›¼ âŠ† â„› is a set of attributes of â„›. The closure of ğœ¶ with respect to ğ‘­, ğœ¶ +, is the set of all attributes ğ‘¦ âˆˆ â„› such that ğ›¼ â†’ ğ‘¦ can be derived from ğ¹ using Armstrongâ€™s axioms. I.e., ğ›¼+ = ğ‘¦ âˆˆ â„› ğ¹ âŠ¢ ğ›¼ â†’ ğ‘¦} â€¢ Given ğ¹ be a set of FDs over â„›, ğ›¼ âŠ† â„› is a set of attributes of â„›, how to find ğ›¼+? â€¢ An algorithm: â€¢ ğ›¼+ := ğ›¼; â€¢ repeat â€¢ ğ›¼ğ‘œğ‘™ğ‘‘ + := ğ›¼+ ; â€¢ for each FD ğ›½ â†’ ğ›¾ âˆˆ ğ¹ â€¢ if ğ›½ âŠ† ğ›¼+ then ğ›¼+ â‰” ğ›¼+ âˆª ğ›¾ â€¢ until (ğ›¼+ = ğ›¼ğ‘œğ‘™ğ‘‘ + ) â€¢ output ğ›¼+ Functional Dependencies 36 More about Closure â€¢ How to check if ğ¹ âŠ¢ ğ›¼ â†’ ğ›¾? â€¢ Calculate ğ›¼+ and check ğ›¾ âˆˆ ğ›¼+ â€¢ How to check if ğ¹ âŠ¢ ğº? â€¢ For each ğ›¼ â†’ ğ›¾ âˆˆ ğº, check ğ¹ âŠ¢ ğ›¼ â†’ ğ›¾. â€¢ How to check if ğ¹ is equivalent to ğº? â€¢ Check ğ¹ âŠ¢ ğº and ğº âŠ¢ ğ¹ â€¢ How to check if ğ¾ âŠ† â„› is a superkey given FDs ğ¹? â€¢ Check ğ¹ âŠ¢ ğ¾ â†’ â„› â€¢ As we can see, all these questions can be answered easily given an algorithm to compute the closure ğ›¼+. Functional Dependencies 37 Minimal Basis (Minimal Cover) â€¢ Let ğ¹ be a set of FDs â€¢ A->BC, B->D, A->D there might be redundant FDs (e.g., A->D) that can be derived from other FDs. It is natural to ask, how to â€œsimplifyâ€ ğ¹ to remove such redundant FDs? â€¢ ğ¹ is a set of FDs. A Minimal Cover of ğ¹ is a set of FDs ğº that has the following properties: â€¢ ğº is equivalent to ğ¹. (ğ¹ âŠ¨ ğº and ğº âŠ¨ ğ¹) â€¢ All FDs in ğº have the form X â†’ A, where A is a single attribute â€¢ It is not possible to make G â€smallerâ€ â€¢ Deleting a FD. i.e. G âˆ’ {X â†’ A} â‰¢ G, for any FD X â†’ A âˆˆ G â€¢ Deleting an attribute from the left hand side of a FD. i.e. G âˆ’ {XA â†’ B} + {X â†’ B} â‰¢ G, for any FD XA â†’ B âˆˆ G. Functional Dependencies 38 Computing the Minimum Basis â€¢ Step 1: Let G be the set of FDs obtained from F by decomposing the right hand sides of each FD to a single attribute. â€¢ Step 2: Remove FDs that are trivial â€¢ Step 3: Remove all redundant attributes from the left hand sides of FDs in G. â€¢ How? For each X -> Y, take each attribute x in X, if X-{x} -> Y implies X -> Y, then replace X -> Y with X-{x} - > Y â€¢ Step 4: From the resulting set of FDs, remove all redundant FDs. â€¢ Output the resulting set of FDs AB->C A->BC B->C A->B AB->C A->B A->C B->C A->B B->C A->B A->C B->C A->B B->C A->B Functional Dependencies 39 Using Functional Dependencies Functional Dependencies 40 Decomposition of Relations â€¢ Bad relations combine several concepts â€¢ decompose them so that each concept in one relation â€¢ ğ‘… â‡ ğ‘…1 â€¦ ğ‘…ğ‘› â€¢ Lossless Decomposition â€¢ ğ‘… = ğ‘…1 â‹ˆ ğ‘…2 â€¦ â‹ˆ ğ‘…ğ‘› â€¢ Preservation of Dependencies â€¢ ğ¹ğ· ğ‘… + = ğ¹ğ· ğ‘…1 âˆª â‹¯ âˆª ğ¹ğ· ğ‘…ğ‘› + Functional Dependencies 41 Decomposition of Relations â€¢ When is a decomposition lossless? â€¢ Let â„› = â„›1 âˆª â„›2 â€¢ Consider the decomposition of ğ‘…: â€¢ ğ‘…1 = Î â„›1(ğ‘…) â€¢ ğ‘…2 = Î â„›2(ğ‘…) â€¢ This decomposition is lossless (i.e., ğ‘… = ğ‘…1 â‹ˆ ğ‘…2), if â€¢ (â„›1âˆ© â„›2) â†’ â„›1 OR â€¢ (â„›1âˆ© â„›2) â†’ â„›2 Functional Dependencies 42 Decomposition of Relations â€¢ Not lossless â€¢ Why? â€¢ Guest -/-> Beer (D drinks two types of beer) â€¢ Guest -/> Pub (D goes to two pubs) â€¢ We lose the actual dependency Guest,Pub -> Beer Pub Guest Beer A D F A E G C D G Drink Pub Guest A D A E C D Visitor Guest Beer D F E G D G Drinks Î  Pub Guest Beer A D F A E G C D G C D F A D G R â‹ˆ A guests drinks a given beer at a given pub Functional Dependencies 43 Decomposition of Relations â€¢ Lossless â€¢ Why? â€¢ Child ->Mother â€¢ Child -> Father â€¢ In this example, {Child} is a key of all three relations â€¢ With respect to loss of information, we can always decompose with a key â€¢ Might not always be beneficial in practical. Father Mother Child Johann Martha Else Johann Maria Theo Heinz Martha Cleo Parents Father Child Johann Else Johann Theo Heinz Cleo Father Mother Child Martha Else Maria Theo Martha Cleo Mother Î  Father Mother Child Johann Martha Else Johann Maria Theo Heinz Martha Cleo R â‹ˆ Functional Dependencies 44 Decomposition â€“ Preservation of FDs â–ª Let â„› be decomposed into â„›1â€¦ â„›ğ‘› â–ª ğ¹ğ· ğ‘… + = ğ¹ğ· ğ‘…1 âˆª â‹¯ âˆª ğ¹ğ· ğ‘…ğ‘› + â–ª (We cannot specify FDs across relations) â–ª Example: â¢ ZipCodes: {Street, City, Canton, Zip} â¢ FD(ZipCodes): â€¢ Zip -> City, Canton â€¢ Street, City, Canton -> Zip â¢ Think about this decomposition â¢ Lossless? YES â€¢ Why? Zip -> City, Canton â¢ Preserve FDs? -- No â€¢ Lose Street, City, Canton -> Zip Functional Dependencies 45 Lessons learned â€¢ Functional dependencies provide information on the relationships between attributes in a relation and across relations â€¢ They can be used to identify â€¢ The key â€¢ Redundancy â€¢ Relations that can be merged â€¢ Capture cardinality â€¢ And to define normal forms â€¢ Normal forms is the next lecture Functional Dependencies 46","libVersion":"0.3.2","langs":""}