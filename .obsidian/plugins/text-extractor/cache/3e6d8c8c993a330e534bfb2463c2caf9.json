{"path":"sem2/DDCA/VRL/slides/DDCA-L06-arithmetic-circuits.pdf","text":"C a r ne gi e M e l l on 1 D i g i t a l D e s i g n a nd C o m put e r A r c hi t e c t ur e M o ha m m a d S a dr o s a da t i F r a nk K . G ür k a y na k A d a p t e d f r o m D i g i t a l D e s i g n a n d C o m p u t e r A r c h i t e c t u r e , D a v i d M o n e y H a r r i s & S a r a h L . H a r r i s © 2 0 0 7 E l s e v i e r http:// safari.ethz.ch / ddca Co m b i n at i o n al Ci rc u i t s i n Pro c e s s o rs Ar i t hm e t i c C i r cui t s C a r ne gi e M e l l on 2 In T h is Lec tu r e ¢ W h y a r e a r i t h m e t i c c i r c u i t s s o i m p o r t a n t ¢ Ad d e r s § A ddi ng t w o bi na r y num be r s § A ddi ng m o r e t ha n t w o bi na r y num be r s § C i r c ui t s B a s e d o n A dde r s ¢ Mu l t i p l i e r s ¢ Func t i o ns t ha t do no t us e a dde rs ¢ A r i t h m e t i c L o gi c U n i t s C a r ne gi e M e l l on 3 Mo t i v a t i o n: A r i t hm e t i c C i r c ui t s ¢ C o r e o f e v e r y d i gi t a l c i r c u i t § E v e r y t hi ng e l s e i s s i de - di s h, a r i t hm e t i c c i r c ui t s a r e t he he a r t o f t he di g i t a l sy ste m ¢ D e t e r m i n e s t h e p e r f o r m a n c e o f t h e s ys t e m § D i c t a t e s c l o c k r a t e , s pe e d, a r e a § I f a r i t hm e t i c c i r c ui t s a r e o pt i m i z e d pe r f o r m a nc e w i l l i m pr o v e ¢ Op p o r t u n i t i e s f o r i m p r o ve m e n t § N o v e l a l g o r i t hm s r e qui r e no v e l c o m bi na t i o ns o f a r i t hm e t i c c i r c ui t s , t he r e i s a l w a y s r o o m f o r i m pr o v e m e nt C a r ne gi e M e l l on 4 Ex a m p l e : A R M M i c r o c o n t r o l l e r ¢ Mo s t p o p u l ar e m b e d d e d mi c ro c o nt ro l l e r. ¢ Co n ta i n s: § M ul t i pl i e r § A c c um ul a t o r § A L U / A dde r § S hi f t e r § I nc r e m e nt e r C a r ne gi e M e l l on 5 Ex a m p l e : A R M I n s t r u c t i o n s C a r ne gi e M e l l on 6 A r i t h m e t i c B a s e d I n s t r u c t i o n s o f A R M MOV MVN MRS MSR ADD ADC SUB SBC RSB RSC MUL MLA UMULL UMLAL SMULL SMLAL CMP CMN QADD QDADD QSUB SMUL SMULA SMULW SMLAW CLZ TST TEQ AND XOR OR BIC B BL BX BLX LD,STR LD,STRT LD,STRB LD,STRBT LDRSB LD,STRH LDRSH LD,STM LD,STMIB LD,STMIA LD,STMDB LD,STMDA LD,STRD PLD SWP SWI BKPT CDP MRC,MCR MRRC,MCRR C a r ne gi e M e l l on 7 T y p e s o f A r i t h m e t i c C i r c u i t s ¢ I n o r d e r o f c o m p l e x i t y: § S hi f t / R o t a t e § C o m pa r e § I nc r e m e nt / D e c r e m e nt § Ne ga t i on § A ddi t i o n / S ubt r a c t i o n § M ul t i pl i c a t i o n § Di v i s i o n § S qua r e R o o t § E x po ne nt a t i o n § L o g a r i t hm i c / T r i g o no m e t r i c F unc t i o ns C a r ne gi e M e l l on 8 Re l at i o n B e t w e e n A ri t h me t i c O p e rat o rs C a r ne gi e M e l l on 9 Addi t i o n ¢ Ad d i t i on i s t h e mo s t i mpo r t an t op e r a t ion in com p u t e r ar i t h m e t i c . Ou r t o p i c s w i l l b e : § Addi ng 1 - bi t num be r s : C o unt i ng bi t s § Addi ng t w o num be r s : B a s i c s o f a ddi t i o n § Ci r c u i t s b a s e d o n a d d e r s : S ubt r a c t o r s , C o m pa r a t o r s § Addi ng m ul t i pl e num be r s : C ha i ns o f A dde r s ¢ La t e r w e w ill a ls o t a lk a b ou t f a s t a d d e r a rch it e ct u re s C a r ne gi e M e l l on 10 Ha lf - Adde r ( 2 , 2 ) C o unt e r ¢ The Ha lf A d d e r (H A ) i s t h e s i m p l e s t ar i t h m e t i c b l o c k ¢ It ca n a d d t w o 1 - bi t numbe rs , re s ul t i s a 2 - bi t numbe r ¢ Ca n b e r ea l i z ed ea si l y C a r ne gi e M e l l on 11 Fu l l - Adde r ( 3 , 2 ) C o unt e r ¢ The Ful l A dde r ( FA ) i s t he es s ent ia l ar i t h m e t i c b l o c k ¢ It ca n a d d t h r e e 1 - bi t numbe rs , re s ul t is a 2 - bi t numbe r ¢ T h e r e a r e m a n y r e a l i z a t i o n s b o t h a t ga t e a n d t r a n s i s t o r l e v e l . ¢ S i n c e i t i s u s e d i n b u i l d i n g m a n y ar i t h m e t i c o p e r at i o n s , t h e pe rf o rma nc e o f o ne FA i nf l ue nc e s t he o v e r a l l p e r f o r m a n c e gr e a t l y. C a r ne gi e M e l l on 12 Addi ng M ul t i pl e 1 - bi t N um be r s C a r ne gi e M e l l on 13 Addi ng M ul t i pl e Di gi t s ¢ Si m i l ar t o d e c i m al ad d i t i o n ¢ S t a r t i n g f r o m t h e r i gh t , e a c h d i gi t i s a d d e d ¢ T h e c a r r y f r o m o n e d i gi t i s a d d e d t o t h e d i gi t t o t h e l e f t C a r ne gi e M e l l on 14 Addi ng M ul t i pl e Di gi t s ¢ Si m i l ar t o d e c i m al ad d i t i o n ¢ S t a r t i n g f r o m t h e r i gh t , e a c h d i gi t i s a d d e d ¢ T h e c a r r y f r o m o n e d i gi t i s a d d e d t o t h e d i gi t t o t h e l e f t C a r ne gi e M e l l on 15 Ri p p l e C arry A d d e r ( RC A ) C a r ne gi e M e l l on 16 C u r s e o f t h e C a r r y Th e m o s t s i g n i f i ca n t o u t p u t s o f t h e a d d e r de pe n ds o n t h e l e as t s i gn i f i c an t i n pu t s C a r ne gi e M e l l on 17 Addi ng M ul t i pl e N um be r s ¢ M u l t i p l e f a s t a d d e r s n o t a go o d i d e a § I f m o r e t ha n 2 num be r s a r e t o be a dde d, m ul t i pl e f a s t a dde r s a r e no t r e a l l y e f f i c i e nt ¢ U s e a n a r r a y o f r i p p l e c a r r y a d d e r s § P o pul a r a nd e f f i c i e nt s o l ut i o n ¢ U s e c a r r y s a v e a d d e r t r e e s § I ns t e a d o f us i ng c a r r y pr o pa g a t e a dde r s ( t he a dde r s w e ha v e s e e n s o f a r ) , ca r r y s a v e a d d e r s a r e us e d t o r e duc e m ul t i pl e i nput s t o t w o , a nd t he n a s i ng l e c a r r y pr o pa g a t e a dde r i s us e d t o s um up. C a r ne gi e M e l l on 18 A r r a y o f R i p p l e C a r r y A d d e r s C a r ne gi e M e l l on 19 Carry Save Pri n c i p l e ¢ R e d u c e s t h r e e n u m b e r s t o t w o w i t h a s i n gl e ga t e d e l a y C + S = E + F + G C a r ne gi e M e l l on 20 Carry Save Pri n c i p l e Z = D + E + F + G + H ¢ A n a r r a y o f c a r r y s a v e ad d e r s r e d u c e t h e i n p u t s t o tw o ¢ A f i n a l ( f a s t ) c a r r y p r o p a ga t e a d d e r ( C P A ) m e r ge s t h e t w o numbe rs ¢ P e r f o r m a n c e m o s t l y d i c t a t e d b y C P A CSA1 CSA2 CSA3 CPA D E F G H Z C 1 S 1 C 2 S 2 C 3 S 3 C a r ne gi e M e l l on 21 Mul t i pl i e r s ¢ L a r ge s t c o m m o n a r i t h m e t i c b l o c k § R e qui r e s a l o t o f c a l c ul a t i o n ¢ Ha s t hre e pa rt s § P a r t i a l P r o duc t G e ne r a t i o n § C a r r y S a v e T r e e t o r e duc e pa r t i a l pr o duc t s § C a r r y P r o pa g a t e A dde r t o f i na l i z e t he a ddi t i o n ¢ A d d e r p e r f o r m a n c e ( o n c e a ga i n ) i s i m p o r t a n t ¢ M a n y o p t i m i z a t i o n a l t e r n a t i v e s C a r ne gi e M e l l on 22 De ci m a l M u l t i p l i ca t i o n C a r ne gi e M e l l on 23 Bi n a r y M u l t i p l i c a t i o n 0 1 0 1 0 0 1 1 Partial Products 1 0 0 1 0 1 1 1 0 1 0 1 1 0 0 1 0 1 0 1 1 0 0 1 0 1 0 1 1 0 0 1 0 0 0 00 000 0 1 0 1 1 0 0 1 0 1 0 1 1 0 0 1 0 0 0 00 000 0 0 0 00 000 0 0 1 00 110 0 1 10 1 110 89 55 4895 C a r ne gi e M e l l on 24 Fo r n - bi t Mul t i pl i e r m - bi t Mul t i pl i c a nd ¢ Ge n e r a t e P a r t ia l P r od u ct s § F o r e a c h bi t o f t he m ul t i pl i e r t he pa r t i a l pr o duc t i s e i t he r § w he n ‘ 0 ’ : a l l z e ro e s § w he n ‘ 1 ’ : t he m ul t i pl i c a nd a c hi e v e d e a s i l y by A N D g a t e s ¢ Re duc e Pa rt i a l Pro duc t s § T hi s i s t he j o b o f a c a r r y s a v e a dde r ¢ Ge n e r a t e t h e R e s u lt ( n + m b it s ) § T hi s i s a l a r g e , f a s t C a r r y P r o pa g a t e A dde r C a r ne gi e M e l l on 25 Paral l e l M u l t i p l i e r C a r ne gi e M e l l on 26 Paral l e l M u l t i p l i e r C a r ne gi e M e l l on 27 Ope r a t i o ns B a s e d o n A dde r s ¢ Se ve r al w e l l - kno w n a rit hme t ic o pe ra t io n a re ba s e d o n a dde rs : § Ne ga t or § I nc r e m e nt e r § S ubt r a c t e r § A dde r S ubt r a c t e r § C o m pa r a t o r C a r ne gi e M e l l on 28 Neg a tin g T w o’ s C om p lem en t Nu m b er s Adder 0 C o -A A 1 A ¢ T o n e ga t e a t w o ’ s com p le m e n t n u m b e r - A = A + 1 ¢ Al l b i t s a r e i n v e r t e d ¢ On e i s ad d e d t o t h e r e s u l t ¢ C a n b e r e a l i z e d e a s i l y b y a n ad d e r . ¢ B i n p u t i s o p t i m i z e d a w a y C a r ne gi e M e l l on 29 In c r em en ter ¢ B i n p u t i s z e r o ¢ C a r r y I n ( C in ) o f t h e ad d e r ca n b e u s e d a s t h e In cr e m e n t ( In c ) i n p u t ¢ De c r e m e n t e r si m i l a r i n pri nc i pl e C a r ne gi e M e l l on 30 Su b t rac t e r ¢ B i n p u t i s i n v e r t e d ¢ C in of t h e a d d e r is u s e d t o com p le m e n t B C a r ne gi e M e l l on 31 Su b t rac t e r ¢ B i n p u t i s i n v e r t e d ¢ C in of t h e a d d e r is u s e d t o com p le m e n t B ¢ It ca n b e m a d e p r o gr a m m a b l e s o t h a t b o t h ad d i t i o n s an d s u b t r ac t i o n s ca n b e p e r f or m e d a t t h e sa m e ti m e C a r ne gi e M e l l on 32 Co m p arat o r ¢ Ba s e d o n a Su b t r ac t o r (A = B) = EQ (A != B) = EQ (A > B) = GE EQ (A >= B) = GE (A < B) = GE (A <= B) = GE + EQ C a r ne gi e M e l l on 33 Fu n c t i o n s Re al i z e d W i t h o u t A d d e rs ¢ N o t a l l a r i t h m e t i c f u n c t i o n s a r e r e a l i z e d b y u s i n g a d d e r s § S hi f t / R o t a t e U ni t s ¢ B i n a r y L o gi c f u n c t i o n s a r e a l s o u s e d b y p r o c e s s o r s § AN D § OR § XO R § NO T T h e s e a r e i m p l e m e n t e d v e r y e a s i l y C a r ne gi e M e l l on 34 S h i ft e r s ¢ L o gi c a l s h i f t e r : s h i f t s v a l u e t o l e f t o r r i gh t a n d f i l l s e m p t y sp a c es w i th 0 ’ s § Ex: 11001 >> 2 = ?? § Ex: 11001 << 2 = ?? ¢ A r i t h m e t i c s h i f t e r : s a m e a s l o gi c a l s h i f t e r , b u t o n r i gh t s h i f t , f i l l s e m p t y s p a c e s w i t h t h e o l d m o s t s i gn i f i c a n t b i t ( ms b ). § Ex: 11001 >>> 2 = ?? § Ex: 11001 <<< 2 = ?? ¢ R o t a t o r : r o t a t e s b i t s i n a c i r c l e , s u c h t h a t b i t s s h i f t e d o f f o n e en d a r e sh i f ted i n to th e o th er en d § Ex: 11001 ROR 2 = ?? § Ex: 11001 ROL 2 = ?? C a r ne gi e M e l l on 35 S h i ft e r s ¢ L o gi c a l s h i f t e r : s h i f t s v a l u e t o l e f t o r r i gh t a n d f i l l s e m p t y sp a c es w i th 0 ’ s § Ex: 11001 >> 2 = 00 110 § Ex: 11001 << 2 = 001 00 ¢ A r i t h m e t i c s h i f t e r : s a m e a s l o gi c a l s h i f t e r , b u t o n r i gh t s h i f t , f i l l s e m p t y s p a c e s w i t h t h e o l d m o s t s i gn i f i c a n t b i t ( ms b ). § Ex: 11001 >>> 2 = 11 110 § Ex: 11001 <<< 2 = 001 00 ¢ R o t a t o r : r o t a t e s b i t s i n a c i r c l e , s u c h t h a t b i t s s h i f t e d o f f o n e en d a r e sh i f ted i n to th e o th er en d § Ex: 110 01 ROR 2 = 01 110 § Ex: 11 001 ROL 2 = 001 11 C a r ne gi e M e l l on 36 S h i ft e r D e s i g n A 3:0 Y 3:0 shamt 1:0 >> 2 4 4 A 3 A 2 A 1 A 0 Y 3 Y 2 Y 1 Y 0 shamt 1:0 00 01 10 11 S 1:0 S 1:0 S 1:0 S 1:0 00 01 10 11 00 01 10 11 00 01 10 11 2 C a r ne gi e M e l l on 37 S h i ft e r s a s M u l t i p l i e r s a n d D i v i d e r s ¢ A l e f t s h i f t b y N b i t s m u l t i p l i e s a n u m b e r b y 2 N § Ex: 00001 << 2 = 00100 (1 × 2 2 = 4) § Ex: 11101 << 2 = 10100 ( - 3 × 2 2 = - 12) ¢ The ar i t h m e t i c r i gh t s h i f t b y N d i v i d e s a n u m b e r b y 2 N § Ex: 01000 >>> 2 = 00010 (8 ÷ 2 2 = 2) § Ex: 10000 >>> 2 = 11100 ( - 16 ÷ 2 2 = - 4) C a r ne gi e M e l l on 38 Ot he r F unc t i o ns ¢ W e h a v e c o v e r e d 9 0 % o f t h e a r i t h m e t i c f u n c t i o n s c o m m o n l y us e d i n a C PU ¢ Di v i s i o n § D e di c a t e d a r c hi t e c t ur e s no t v e r y c o m m o n § M o s t l y i m pl e m e nt e d by e x i s t i ng ha r dw a r e ( m ul t i pl i e r s , s ubt r a c t o r s c o m pa r a t o r s ) i t e r a t i v e l y ¢ E x p o n e n t i a l , L o ga r i t h m i c , T r i go n o m e t r i c F u n c t i o n s § D e di c a t e d ha r dw a r e ( l e s s c o m m o n) § N um e r i c a l a ppr o x i m a t i o ns : exp (x) = 1 + x 2 /2! + x 3 /3! + … § Lo o k - up t a bl e s ( m o r e c o m m o n) C a r ne gi e M e l l on 39 Ar i t hm e t i c L o gi c U ni t Th e r e a s o n wh y we s t u d y d i g i t a l ci r cu i t s : th e p a rt o f th e CP U th a t d o e s so m e th i n g ( o th e r th a n c o p y i n g d a ta ) ¢ De f i n e s t h e b a s i c o p e r a t i o n s t h a t t h e C P U c a n p e r f o r m d i r e c t l y § O t he r f unc t i o ns c a n be r e a l i z e d us i ng t he e x i s t i ng o ne s i t e r a t i v e l y . ( i . e . m ul t i pl i c a t i o n c a n be r e a l i z e d by s hi f t i ng a nd a ddi ng ) ¢ M o s t l y, a c o l l e c t i o n o f r e s o u r c e s t h a t w o r k i n p a r a l l e l . § D e pe ndi ng o n t he o pe r a t i o n o ne o f t he o ut put s i s s e l e c t e d C a r ne gi e M e l l on 40 Ex a m p l e : A r i t h m e t i c L o g i c U n i t ( A L U ) , p g 2 4 3 ALU N N N3 A B Y F F 2: 0 Fu n c t i o n 000 A & B 001 A | B 010 A + B 011 no t us e d 100 A & ~ B 101 A | ~ B 110 A - B 111 SL T C a r ne gi e M e l l on 41 Ex a m p l e : A L U D e s i g n +201 A B C out Y301 F 2 F 1:0 [N-1] S NN N N N NNN N 2ZeroExtend F 2: 0 Fu n c t i o n 000 A & B 001 A | B 010 A + B 011 no t us e d 100 A & ~ B 101 A | ~ B 110 A - B 111 SL T C a r ne gi e M e l l on 42 Se t L e s s T h an ( SL T ) E xamp l e ¢ C o n f i gu r e a 3 2 - bi t A L U f o r t he s e t i f le s s t h a n ( S LT ) op e ra t ion . S u p p os e A = 25 a n d B = 32. § A i s l e s s t ha n B , s o w e e x pe c t Y t o be t he 32 - bi t r e pr e s e nt a t i o n o f 1 ( 0x00000001 ). +201 A B C out Y301 F 2 F 1:0 [N-1] S NN N N N NNN N 2ZeroExtend C a r ne gi e M e l l on 43 Se t L e s s T h an ( SL T ) E xamp l e ¢ C o n f i gu r e a 3 2 - bi t A L U f o r t he s e t i f le s s t h a n ( S LT ) op e ra t ion . S u p p os e A = 25 a n d B = 32. § A i s l e s s t ha n B , s o w e e x pe c t Y t o be t he 32 - bi t r e pr e s e nt a t i o n o f 1 ( 0x00000001 ). § F o r S L T , F 2: 0 = 111 . § F 2 = 1 c o nf i g ur e s t he a dde r uni t a s a s ubt r a c t e r . S o 2 5 - 32 = - 7. § T he t w o ’s c o m pl e m e nt r e pr e s e nt a t i o n o f - 7 ha s a 1 i n t he m o s t s i g ni f i c a nt bi t , s o S 31 = 1 . § W i t h F 1: 0 = 1 1 , t he f i na l m ul t i pl e x e r se l e c ts Y = S 31 ( z e r o e x t e nde d) = 0x00000001 +201 A B C out Y301 F 2 F 1:0 [N-1] S NN N N N NNN N 2ZeroExtend C a r ne gi e M e l l on 44 Wh a t D id We Lea r n ? ¢ H o w c a n w e a d d , s u b t r a c t , m u l t i p l y b i n a r y n u m b e r s ¢ Wh a t o t h e r c i r c u i t s d e p e n d o n a d d e r s § S ubt r a c t e r § I nc r e m e nt e r § C o m pa r a t o r § I m po r t a nt pa r t o f M ul t i pl i e r ¢ O t h e r f u n c t i o n s ( s h i f t i n g) ¢ H o w i s a n A r i t h m e t i c L o gi c Un i t c o n s t r u c t e d","libVersion":"0.3.1","langs":""}