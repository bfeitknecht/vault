{"path":"sem4/CN/VRL/extra/CN-kathara-introduction.pdf","text":"© Computer Networks Research Group Roma Tre Kathará A container-based framework for experimenting computer networking Version 2.1 Author(s) L. Ariemma, G. Bonofiglio, G. Di Battista, V. Iovinella, G. Lospoto, M. Patrignani, M. Pizzonia, M. Rimondini E-mail contact@kathara.org Web https://www.kathara.org/ Description An introduction to the architecture, setup and usage of Kathará – based on a similar presentation of Netkit © Computer Networks Research Group Roma Tre Copyright notice last update: Oct 2023Kathará - Introduction n All the pages/slides in this presentation, including but not limited to, images, photos, animations, videos, sounds, music, and text (hereby referred to as “material”) are protected by copyright. n This material, with the exception of some multimedia elements licensed by other organizations, is property of the authors and/or organizations appearing in the first slide. n This material, or its parts, can be reproduced and used for didactical purposes within universities and schools, provided that this happens for non-profit purposes. n Information contained in this material cannot be used within network design projects or other products of any kind. n Any other use is prohibited, unless explicitly authorized by the authors on the basis of an explicit agreement. n The authors assume no responsibility about this material and provide this material “as is”, with no implicit or explicit warranty about the correctness and completeness of its contents, which may be subject to changes. n This copyright notice must always be redistributed together with the material, or its portions. © Computer Networks Research Group Roma Tre About computer networks last update: Oct 2023Kathará - Introduction n Computer networks are quite complex n Several devices (computers, routers, etc.) n Several interfaces n Several protocols running n Physical interconnections originate complex topologies © Computer Networks Research Group Roma Tre Example of a computer network last update: Oct 2023Kathará - Introduction 0:3 .1 0:4 .2 0:6 .1 0:8 .2 10.10.20.0/3010.10.10.0/30 100.0.2.0/24 .55 .1 C:55 0:7 100.0.3.0/24 .1 .77 0:5 C:77 100.0.0.0/24 .33 .1 C:33 0:1 100.0.1.0/24 .1 .22 0:2 C:22.11C:11 A:2 .44 Internet © Computer Networks Research Group Roma Tre How to perform experiments? n Performing experiments may be unfeasible n A live network cannot be exploited for experiments n It hosts services that are critical for the company n It would be necessary to coordinate different departments of the company n Network equipment is expensive n Sometimes, even for performing simple experiments, several equipment should be available in the same test bed last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Simulation vs. emulation n Emulation and simulation systems put at user’s disposal a virtual environment that can be exploited for tests, experiments, measures n Simulation systems aim at reproducing the performance of a real- life system (latency time, packet loss, etc.) n e.g.: ns, real, … n Emulation systems aim at accurately reproducing the functionalities of a real-life system (configurations, architectures, protocols), with limited attention to performance last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará last update: Oct 2023Kathará - Introduction a system for emulating computer networks © Computer Networks Research Group Roma Tre Emulating a network n Basic idea: n several containers are created inside a single host machine n containers are connected to virtual collision domains and thus can communicate with each other n Each container can be configured as a device that plays the role of a regular host, of a router, of a switch, …. last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Docker and containers A container is a standard unit of software that packages up code and all its dependencies, so the application runs quickly and reliably from one computing environment to another. last update: Oct 2023Kathará - Introduction https://www.docker.com/resources/what-container © Computer Networks Research Group Roma Tre Kathará n Based on Docker n Each emulated network device (in what follows device) is a container n Note: several container images available, e.g.: n Base (DNS, Web Server, network utilities) n Quagga (standard routing protocols) n FRRouting (standard routing protocols + EVPN + MPLS) n Open vSwitch (Open Flow enabled switch) n Behavioral Model (software implementation of a P4 switch) last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Emulated network devices n Each device has: n A console (a terminal window) n A memory n A filesystem n (zero, one or more) network interfaces n Each network interface is connected to a single (virtual) collision domain n Each virtual collision domain can be connected to several interfaces last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre last update: Oct 2023Kathará - Introduction user@host$ █ host machine host machine console pc3 collision domain A pc1 pc2 collision domain B root@pc1:~$ █ root@pc3:~$ █ root@pc2:~$ █ © Computer Networks Research Group Roma Tre Setting up Kathará last update: Oct 2023Kathará - Introduction Setup manual © Computer Networks Research Group Roma Tre Installing Kathará n Available for: n Windows n Linux n MacOS n Download at https://www.kathara.org/ n Follow the wiki last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Changing the default Docker Image n Run kathara settings n Select Choose default image by pressing 2 n Select kathara/frr by pressing 2 n Confirm and exit last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Using Kathará last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará commands n Kathará provides users with three sets of commands n v-prefixed commands (v-commands) n l-prefixed commands (l-commands) n Global commands n v-commands act as low-level tools for configuring and starting up a single device n l-commands provide an easier-to-use environment to set up complex labs consisting of several devices n Global commands are mainly management commands last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará v-commands n Allow to startup a single device with arbitrary configurations (network interfaces, etc.) n vstart: starts a new device n vconfig: attaches network interfaces to a running device n vclean: halts a device last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará l-commands n Ease setting up complex labs consisting of several virtual machines n lstart: starts a Kathará lab n lclean: halts all the devices of a lab n lconfig: manage the network interface of a running lab n lrestart: halts all the devices of a lab and start them again n linfo: provides information about a lab last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará global commands n Management commands n check: Check your system environment n connect: Connect to a running Kathará machine n list: Show all running Kathará machines of the current user n settings: Show and edit Kathará settings n wipe: Delete all Kathará machines and links, optionally also delete settings last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Testing Kathará last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Testing Kathará n To test if your setup works correctly run: n kathara check n This command will ran automatic tests to your environment n kathara vstart -n pc1 --eth 0:A n This command will start a new device called pc1 and connected to the virtual collision domain A n A terminal window will open allowing to run commands inside the device n kathara vclean -n pc1 n This command will stop the previous started device last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Preparing a Kathará lab last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Kathará lab n a Kathará lab is a set of preconfigured devices that can be started and halted together n a basic Kathará lab is a directory tree containing: n a lab.conf file describing the network topology n a set of subdirectories that contain the configuration settings for each device n <device_name>.startup files that describe actions performed by devices when they are started last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre lab.conf n describes: n The topology of the network that interconnects the lab’s devices n The devices to be started n contain a list of machine[arg]=value lines where: n machine is the name of the device (e.g. pc1) n if arg is a number, then value is the name of a collision domain to which etharg should be attached n if arg is not a number, then it must be an option and value the argument last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre lab.conf last update: Oct 2023Kathará - Introduction n example pc1[0]=A pc2[0]=A pc2[1]=B pc3[0]=B pc1 pc2 eth0 eth0 collision domain A pc3 eth0 eth1 collision domain B © Computer Networks Research Group Roma Tre Share files between the host and the devices n There are two ways to share files between the host filesystem and the device filesystem: n Share files mirrored to the device n A change inside the device will reflect in the host filesystem n A change in the host filesystem will reflect in the device n Share files copied to the device n Two independent copies of the same files last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Share files mirrored to the device n There are two ways to share mirrored files: n the /shared directory inside a device directly points to the shared directory inside the lab n by default it is ENABLED, you can disable it in the settings n the /hosthome directory inside a device directly points to the home directory of the current user of the host n by default it is DISABLED, you can enable it in the settings last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre Share files copied to the device n Can be done through the subdirectories of a lab n The contents of subdirectory device are copied into the root (/) of the device named device filesystem n for example, pc1/foo/file.txt is copied to /foo/file.txt inside the device pc1 last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre .startup files n Shell scripts that are executed inside a device right after its startup n Typical usage of a .startup file is to configure network interfaces and/or start network services n For example: last update: Oct 2023Kathará - Introduction ip address add 10.0.0.1/24 dev eth0 systemctl start frr © Computer Networks Research Group Roma Tre Launching/halting a lab n Open a terminal n Enter the lab directory (cd lab_directory) n Launch a Kathará l-command n Where l-command could be one of the following n kathara lstart, to start the lab n kathara lclean, to stop the lab n kathara lrestart, to restart the lab last update: Oct 2023Kathará - Introduction © Computer Networks Research Group Roma Tre More information n Further information can be found: n On GitHub’s Kathará wiki n On the official website https://www.kathara.org n Inside Kathará man pages n On Linux and MacOS accessible by the terminal man kathara n Available online at https://www.kathara.org/man-pages/kathara.1.html last update: Oct 2023Kathará - Introduction","libVersion":"0.3.2","langs":""}