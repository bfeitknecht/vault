{"path":"sem2a/DDCA/VRL/slides/DDCA-L09a-open-source.pdf","text":"pulp-platform.org @pulp_platform youtube.com/pulp_platform PULP Platform Open Source Hardware, the way it should be! Part of the Digital Design and Computer Architectures 2024 course The PULP team and open source hardware at ETH Zürich Frank K. Gürkaynak kgf@iis.ee.ethz.ch Introducing the PULP team at ETH Zurich • Started by Prof. Luca Benini at D-ITET • We wanted to design energy efficient computing systems • Equally efficient for IoT and HPC over a wide range • Key points • Parallel processing • Near threshold computing • Efficient switching between operating modes • Making best use of technology • Heterogeneous acceleration • Parallel Ultra Low-Power (PULP) platform was born The PULP team and open source hardware at ETH Zürich 2 Team of 100 people in ETH Zürich – University of Bologna • Research on open-source energy-efficient computing architectures • Started in 2013, celebrated 10 years of PULP last year • Led by Luca Benini • Involves ETH Zürich (Switzerland) and University of Bologna (Italy) • Large group of almost 100 people 3The PULP team and open source hardware at ETH Zürich Too much to do and not enough resources DATA KNOWLEDGESIGNAL XMIT PROCESSSENSE NodeEdge µC I/OA/D A/D A/D Edge Node µC I/OA/D A/D A/D Edge Node µC I/OA/D A/D A/D Gateway µP I/OI/O I/O I/O Compute Node I/O Acc µP Mem µP µP µP Mem µP µP µP Mem µP µP µP Mem Limited Resources (mem/cpu/power) Limited Bandwidth Too much to calculate Energy efficient systems that can process more on edge nodes The PULP team and open source hardware at ETH Zürich 4 Less data to transmit, large savings on energy needed for data transmissions Accelerators for more efficient computing We have designed and tested more than 55 PULP ICs 5 2013 (3) PULPv1 STM 28FDSOI Multi-core processor Diana UMC 65 4-core system with approximate FPUs 2014 (5) Fulmine UMC 65 4-core system with ML and Crypto accelerators 2015 (10) 2016 (3) VivoSoC 2.001 SMIC 130 Mixed signal system for biosignal acquisiton 2017 (2) Mr. Wolf TSMC 40 8+1 core IoT processor 2018 (6) Poseidon GF 22FDX 64bit RISC-V core, 32bit Microcontroller system, ML accelerator 2019 (7) Baikonur GF 22FDX Dual 64bit RISC-V core, 3x 8core snitch clusters, Body biasing test vehicle 2020 (3) Dustin TSMC 65 IoT processor with 16 cores and QNN enhancements 2021 (7) Kraken GF 22FDX IoT processor with Spiking Neural and Ternary Inference Engines 2022 (9) Occamy GF 12LPP ML accelerator with 216 + 1 cores and HBM interface Check http://asic.ethz.ch for all our chips The PULP team and open source hardware at ETH Zürich Including this one 6 OCCAMY • 432 RISC-V cores • GF12LPP • HBM2E The PULP team and open source hardware at ETH Zürich • Started by UC-Berkeley in 2010 • Open Standard governed by RISC-V foundation • ETHZ is a founding member of the foundation • Necessary for the continuity • Extensions are still being developed • Defines 32, 64 and 128 bit ISA • No implementation, just the ISA • Different RISC-V implementations (both open and close source) are available Spec separated into “extensions” RISC-V Instruction Set Architecture I Integer instructions E Reduced number of registers M Multiplication and Division A Atomic instructions F Single-Precision Floating-Point D Double-Precision Floating-Point C Compressed Instructions X Non Standard Extensions We will cover ISA in our lecture soon. Why is RISC-V so special: Freedom to Explore and Fail! • The ISA provides a contract between HW and SW • As long as you stick to the ISA, you can develop HW and SW independently • All RISC-V research in HW can continue to rely on growing SW ecosystem for RISC-V • RISC-V comes with plenty of options for extensions • There are reserved encoding spaces for instruction set extensions • Being able to change everything gives great flexibility • Do you want 33 registers, or a 48 bit accumulator.. No problem • You need to bring the SW support for your addtions. The PULP team and open source hardware at ETH Zürich 8 MIPS in our lecture is a pre-cursor of RISC-V RISC-V cores developed by PULP team § IBEX § Zero-riscy § Micro-riscy § 2 options § RV32-ICM § RV32-CE § Ariane/ CVA6 § RV64- ICMAFD § CV32E40P § RV32-ICMXF § SIMD § HW loops § Bit manipulation § Fixed point § Snitch § RV32-IMAFD § Small Int core § Big 64bit FPU § Extensions for streaming Low Cost Core Linux capable Core Core with DSP support Core for Streaming 32 bit 64 bit Mai n t ai n e d B y Op e n H W M a i n t a i n e d b y Op e n H W Mai n t ai n e d B y L o w R I S C Br a n d N e w Co r e Our research is not implementing RISC-V cores • We develop efficient programmable architectures • Processor cores of various capabilities are required for that • We need efficient implementations of cores for our research • To produce relevant results, our cores have to perform as good as other solutions • We ended up spending quite an effort to make sure they perform really well • Processor core alone is not enough • You need peripherals, interconnect solutions, programming support... • PULP Platform provides us a playground for our research • And we share it as open source The PULP team and open source hardware at ETH Zürich Platforms RISC-V Cores RI5CY 32b Ibex 32b Snitch 32b Ariane 64b Interconnect AXI4 – Interconnect APB – Peripheral Bus Logarithmic interconnect Peripherals DMA GPIO I2SUART SPIJTAG Accelerators Neurostream (ML) HWCrypt (crypto) PULPO (1st order opt) HWCE (convolution) R5 MI Ointerconnect A Single Core • PULPino • PULPissimo IOT HPC M I O cluster interconnect A R5R5R5 M MMMinterconnect Multi-core • OpenPULP • Mr. Wolf R5 cluster interconnect R5 R5R5R5 M MMM cluster interconnect R5 R5R5R5 M MMM cluster interconnect A R5R5R5 M MMMM I Ointerconnect Multi-cluster • Occamy • Hero R5 What PULP provides is a box of building blocks 11 All of our designs are open-source hardware • All our development is on GitHub using a permissive license • HDL source code, testbenches, software development kit, virtual platform rm • PULP is released under the permissive Solderpad license • Allows anyone to use, change, and make products without restrictions. 12 https://github.com/pulp-platform Every single entry in the GitHub Trending SystemVerilog repositories for the past month: - is either directly from our group - or has originated in our group The PULP team and open source hardware at ETH Zürich For us open source is a necessity, not an idealogic crusade The PULP team and open source hardware at ETH Zürich Managing Complex Designs Faster Collaborations Auditable Designs, Reproducible Results Facilitates Industry/Academia Relationships 13 Kraken GF22 (2021) about 80 MGE In the last 20 years IC Design has changed a lot Temporex AMS 0.6 (2001) about 20 kGE The PULP team and open source hardware at ETH Zürich 143.0 mm3.3 mm4000 x What used to be a complete chip is now a small part of a SoC ! LINUX KERNEL User-Space Software Kernel-Space Software Hardware APPLICATION HOST DOMAIN AXI interconnect L2 SPM Mem MMU I$ D$ There is so much that makes up a modern SoC The PULP team and open source hardware at ETH Zürich PULP CLUSTER L1 SPM Interconnect DMA I$ HW ACC RV 32 RV 32 RV 32 MemMemMemMem RV 32 RISC-V core SENSORS I/O Ext Mem LLC + Mem ctrl HETEROGENEOUS APPLICATION ACCELERATED KERNEL PULP DRIVER VIRTUAL MEMORY MANAGEMENT LIBRARY HW ABSTRACTION LIBRARY 15 In a typical design, innovation is only in a limited scope The PULP team and open source hardware at ETH Zürich PULP CLUSTER L1 SPM Interconnect DMA RV 32 I$ HW ACC RV 32 RV 32 RV 32 MemMemMemMem HOST DOMAIN AXI interconnect SENSORS I/O Ext Mem LLC + Mem ctrl L2 SPM Mem RISC-V core MMU I$ D$ HETEROGENEOUS APPLICATION ACCELERATED KERNEL LINUX KERNEL PULP DRIVER VIRTUAL MEMORY MANAGEMENT LIBRARY HW ABSTRACTION LIBRARY User-Space Software Kernel-Space Software Hardware Open-source silicon-proven SoC template helps concentrate work where it counts 16 Faster collaborations through open source • No background IP • Everything is already open • No long discussions on IP ownership • Open source licensing for OUR foreground • Friendly licensing for commercial purposes • Permissive licensing allows commercial exploitation, foreground of partners can be closed • We can start right away • Time is spent on design not necessary paperwork • The licensing settles most of the needed discussions (who owns it, who can do what) • You can see what we have and evaluate us in advance The PULP team and open source hardware at ETH Zürich 17 PULP has been used in all our publicly funded research The PULP team and open source hardware at ETH Zürich 18 Swiss Funding (nano-tera) ICYSoC Near threshold computing EU funded research projects OPRECOMP Approximate computing Multi-precision arithmetic European FPA EPI / EUPilot Snitch based accelerators International projects MITACS / Polara Vector extensions for RISC-V processors Private Co-operation How does PULP collaborate with 3rd parties? Partnercommits Custom Designs Co-sponsored resourcescommitscloneissuescommits GAP8 Mr. Wolf 19The PULP team and open source hardware at ETH Zürich The open model led to successful industry collaborations Arnold (GF22) eFPGA with RISC-V core Vega (GF22) IoT Processor with ML acceleration Marsellus (GF22) IoT Processor with low power modes and event based computing Siracusa (TSMC16) IoT Processor with NVM technology The PULP team and open source hardware at ETH Zürich 20 And many have used our work for their research 21 RISC-V week Barcelona 2018 VLSI Symposium 2022 ISSCC Keynote 2020 – Nature 2020 ISPD’23 The PULP team and open source hardware at ETH Zürich Lessons learned from 10+ years of open source The PULP team and open source hardware at ETH Zürich Licensing has challenges Still not everything can be open (PDK, IP, EDA) Ultimately open source HW works even better than expected Governance, contributions, maintenance needs help 22 The license is a crucial part of open source • There is a lot of difference between licenses in open source world • Permissive (i.e Apache) • Reciprocal (i.e GPL) • Many more or in between • Each license has a very legitimate reason to exist • Choosing one is not very trivial • There are a lot of dogmatic decisions • People need to understand and be aware of the pros/cons • Yet to see an open source hardware to be challenged in court • Lawyers have opinions, only some of them are right and could prove this in court The PULP team and open source hardware at ETH Zürich 23 Maybe we can use open source SW licenses? FPGA Design ASIC DesignSimulation/Modeling Virtually Indistinguishable from Standard Software 24 Some (surprising) side effects of open source hardware • There is a surprising amount of bureaucracy involved • Code Ph.D. students/staff develop belongs to the university (they pay us) • Master/semester thesis students own the work they produce • Need to get proper approval for everyone involved. • Most agreements with companies are not meant for open source • Instead of paying for exclusive IP, we need sponsoring agreements • Important to make sure we do not sign anything that binds our open source effort • There are worries that if you see inside you will be more vulnerable to patent trolls / litigation • Some companies do not want it known that they use our designs 25The PULP team and open source hardware at ETH Zürich Simplified IC design flow The PULP team and open source hardware at ETH Zürich 26 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTLIcons taken from free icons from fontawesome.com Simplified IC design flow: at the moment only RTL The PULP team and open source hardware at ETH Zürich 27 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTLIcons taken from free icons from fontawesome.com Simplified IC design flow: proprietary tools The PULP team and open source hardware at ETH Zürich 28 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTL EDA vendors limit the output of their toolsIcons taken from free icons from fontawesome.com Simplified IC design flow: technology provider The PULP team and open source hardware at ETH Zürich 29 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTL Fabs do not make PDK information accessibleIcons taken from free icons from fontawesome.com Simplified IC design flow: 3rd party IP The PULP team and open source hardware at ETH Zürich 30 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTL 3rd party IP when included can limit what can be open sourcedIcons taken from free icons from fontawesome.com Simplified IC design flow: road to opennes The PULP team and open source hardware at ETH Zürich 31 GDS2 Synthesizer PDK Netlist P&RVerification Library3rd Party IP Chip Fab RTL We are getting there, first fully open chips are underway Yosys OpenRoadIcons taken from free icons from fontawesome.com Hardware design flows for PCB/FPGA/ASIC are different • The differences complicate things • Not a uniform way to discuss the issue, depends on the design flow • Different actors, different revenue streams • Not every actor in the current design flow, earns money the same way • EDA companies are long complaining that they are out of the loop Their income is not based on the amount of ICs produced. • Not everybody will be happy if open hardware will be more common • Important to understand the relationships • Interestingly most intermediate file formats are open, readable • Verilog, Liberty, SPICE, EDIF, CIF, LEF, DEF, OA (open access) 32The PULP team and open source hardware at ETH Zürich Open source PDKs are the key • Physical designs will contain technology relevant information • Nothing can be released (even if there were perfect open EDA tools) without technology info • So no open PDK no open source releases beyond RTL/HLS code • IP Providers and EDA companies use PDK as an excuse • “Our design contains proprietary information on technology, we can not release it further” • Open PDKs will allow us to change this • Some will have to make a decision, support open source and adapt, resist and lose market share • Some good progress, more is needed • Skywater (130nm), IHP (130nm), GF(500nm) • A 40nm/65nm open PDK would be a game changer, many viable products could be designed The PULP team and open source hardware at ETH Zürich 33 What is the ”secret” information that is in the PDK? Design Rules Layer Stack 34 Transistor Models All information on this slide is publicly available. From left to right: taken layout from http://vlsi.wpi.edu, layer stack from http://xfab.com, transistor models from ptm.asu.edu Area Parasitics Speed Recently Open PDKs: IHP, Skywater, Globalfoundries • IHP (130nm) • Fab in Germany (Frankfurt an der Oder) • https://www.ihp-microelectronics.com/services/research- and-prototyping-service/fast-design-enablement/open- source-pdk • Skywater (130nm) • Popular through OpenLane • Supported through efforts of Google • https://www.skywatertechnology.com/sky130-open- source-pdk/ • Globalfoundries (500nm) • Name suggests 180nm, but it is a high-voltage process • https://github.com/google/gf180mcu-pdk 35 What about open source EDA? • It works surprisingly well • ETHZ is actively collaborating with UCSD • Open source EDA will allow you to make your own chips • Good for many applications/needs • Will be great for teaching • A gap to SoA will remain • Will not replace commercial EDA • PPA, reliability, service, support • Summer school at ETH Zürich • June 3rd – 7th 36The PULP team and open source hardware at ETH Zürich https://efcl.ethz.ch/efcl-summer-school.html Working together to improve open source design flows The PULP team and open source hardware at ETH Zürich 37 Iguana, Basilisk Linux capable fully-open RISC-V processor The PULP team and open source hardware at ETH Zürich 38 Supported by student projects at ETHZ Professional help is needed for maintenance/governance • We (ETHZ and University of Bologna) are research groups • Motivated to develop new architectures and systems • We needed efficient RISC-V cores (and peripherals) for our work • Not so good (or interested) in providing industrial level support for these cores • We need help to • Provide support • Develop industrial verification • Governance of open source repositories • Happy to receive this help from • Open HW group (Ariane -> CVA6, RI5CY -> CV32E40P) • LowRISC (ZeroRiscy -> Ibex) • EU projects (Tristan/Isolde), Europractice The PULP team and open source hardware at ETH Zürich 39 Open source sees no borders • Trend to ‘nationalize’ processor activities • There is no ‘European/Chinese/American Open Source’, • There can be ’European/Chinese/American support for Open Source’ • Open source is global, but it can have more or less support in regions/countries • Currently open source helps with some challenges related to export controls • If something is public knowledge, you can not demand some people not know it • This is more an unintended side effect, rather than explicit design • Unlikely that it will be possible to challenge it The PULP team and open source hardware at ETH Zürich 40 In a nutshell: Why Open Source Hardware? • It is a necessity • We can not afford to make everything ourselves, we need to collaborate • Makes it possible to work together quickly • Your results are more trustworthy, anybody can verify it! • It works • We have more projects, and more funding due to our open source activities • We were able to start many interesting and fruitful collaborations • It helps others as well • Many companies, universities, individuals are using pieces of PULP • There is already significant commercial use, some we don’t even know about The PULP team and open source hardware at ETH Zürich 41The PULP team and open source hardware at ETH Zürich 42 http://pulp-platform.org @pulp_platform 43 The future of open source HW is bright The PULP team and open source hardware at ETH Zürich","libVersion":"0.3.2","langs":""}